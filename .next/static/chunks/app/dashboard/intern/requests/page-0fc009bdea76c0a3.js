(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4887],{13195:function(e,t,r){Promise.resolve().then(r.bind(r,24503))},24503:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var s=r(57437),a=r(2265),n=r(4808),i=r(68461),d=r(39501),l=r(93023),c=r(86110),o=r(29155),u=r(32553),x=r(12609),m=r(51908),f=r(66672),p=r(55771),h=r(58094),j=r(6141),v=r(74530),g=r(69806),y=r(9883),N=r(76637),b=r(28999),w=r(62621),_=r(19658);function C(){let{user:e}=(0,b.t)(),{toast:t}=(0,w.pm)(),[r,C]=(0,a.useState)([]),[R,Z]=(0,a.useState)(!0),[k,D]=(0,a.useState)(!1),[S,E]=(0,a.useState)({type:"",title:"",description:"",start_date:"",end_date:""});(0,a.useEffect)(()=>{e&&z()},[e]);let z=async()=>{try{Z(!0);let{data:r}=await _.OQ.from("interns").select("id").eq("user_id",null==e?void 0:e.id).single();if(r){let{data:e,error:s}=await _.MJ.getByIntern(r.id);s?t({title:"Erreur",description:"Impossible de charger les demandes",variant:"destructive"}):C(e||[])}}catch(e){console.error("Erreur:",e),t({title:"Erreur",description:"Une erreur est survenue",variant:"destructive"})}finally{Z(!1)}},T=async r=>{r.preventDefault();try{let{data:r}=await _.OQ.from("interns").select("id").eq("user_id",null==e?void 0:e.id).single();if(!r){t({title:"Erreur",description:"Profil stagiaire non trouv\xe9",variant:"destructive"});return}let s={...S,intern_id:r.id,status:"pending"},{data:a,error:n}=await _.MJ.create(s);n?t({title:"Erreur",description:"Impossible de cr\xe9er la demande",variant:"destructive"}):(t({title:"Succ\xe8s",description:"Demande cr\xe9\xe9e avec succ\xe8s"}),D(!1),E({type:"",title:"",description:"",start_date:"",end_date:""}),z())}catch(e){console.error("Erreur:",e),t({title:"Erreur",description:"Une erreur est survenue",variant:"destructive"})}},F=e=>{switch(e){case"pending":return(0,s.jsxs)(o.C,{variant:"secondary",children:[(0,s.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),"En attente"]});case"approved":return(0,s.jsxs)(o.C,{variant:"default",children:[(0,s.jsx)(v.Z,{className:"w-3 h-3 mr-1"}),"Approuv\xe9e"]});case"rejected":return(0,s.jsxs)(o.C,{variant:"destructive",children:[(0,s.jsx)(g.Z,{className:"w-3 h-3 mr-1"}),"Rejet\xe9e"]});case"completed":return(0,s.jsxs)(o.C,{variant:"outline",children:[(0,s.jsx)(v.Z,{className:"w-3 h-3 mr-1"}),"Termin\xe9e"]});default:return(0,s.jsx)(o.C,{variant:"secondary",children:e})}},O=e=>{switch(e){case"leave":return"Cong\xe9";case"extension":return"Prolongation";case"evaluation":return"\xc9valuation";case"document":return"Document";case"support":return"Support";default:return e}};return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,s.jsx)(n.MainNav,{}),(0,s.jsxs)("div",{className:"flex-1 flex",children:[(0,s.jsx)("aside",{className:"w-64 border-r bg-muted/10",children:(0,s.jsx)(i.T,{role:"intern"})}),(0,s.jsx)("main",{className:"flex-1 p-6",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Mes Demandes"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"G\xe9rez vos demandes de cong\xe9s, prolongations et autres"})]}),(0,s.jsxs)(x.Vq,{open:k,onOpenChange:D,children:[(0,s.jsx)(x.hg,{asChild:!0,children:(0,s.jsxs)(l.z,{children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Nouvelle demande"]})}),(0,s.jsxs)(x.cZ,{className:"max-w-md",children:[(0,s.jsxs)(x.fK,{children:[(0,s.jsx)(x.$N,{children:"Cr\xe9er une nouvelle demande"}),(0,s.jsx)(x.Be,{children:"Remplissez les informations de votre demande"})]}),(0,s.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f._,{htmlFor:"type",children:"Type de demande"}),(0,s.jsxs)(h.Ph,{value:S.type,onValueChange:e=>E({...S,type:e}),children:[(0,s.jsx)(h.i4,{children:(0,s.jsx)(h.ki,{placeholder:"S\xe9lectionner un type"})}),(0,s.jsxs)(h.Bw,{children:[(0,s.jsx)(h.Ql,{value:"leave",children:"Cong\xe9"}),(0,s.jsx)(h.Ql,{value:"extension",children:"Prolongation"}),(0,s.jsx)(h.Ql,{value:"evaluation",children:"\xc9valuation"}),(0,s.jsx)(h.Ql,{value:"document",children:"Document"}),(0,s.jsx)(h.Ql,{value:"support",children:"Support"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f._,{htmlFor:"title",children:"Titre"}),(0,s.jsx)(m.I,{id:"title",value:S.title,onChange:e=>E({...S,title:e.target.value}),placeholder:"Titre de la demande",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f._,{htmlFor:"description",children:"Description"}),(0,s.jsx)(p.g,{id:"description",value:S.description,onChange:e=>E({...S,description:e.target.value}),placeholder:"D\xe9crivez votre demande",required:!0})]}),("leave"===S.type||"extension"===S.type)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f._,{htmlFor:"start_date",children:"Date de d\xe9but"}),(0,s.jsx)(m.I,{id:"start_date",type:"date",value:S.start_date,onChange:e=>E({...S,start_date:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f._,{htmlFor:"end_date",children:"Date de fin"}),(0,s.jsx)(m.I,{id:"end_date",type:"date",value:S.end_date,onChange:e=>E({...S,end_date:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,s.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>D(!1),className:"flex-1",children:"Annuler"}),(0,s.jsx)(l.z,{type:"submit",className:"flex-1",children:"Cr\xe9er"})]})]})]})]})]}),(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(N.Z,{className:"w-5 h-5"}),"Liste des demandes"]}),(0,s.jsx)(c.SZ,{children:"Historique de toutes vos demandes"})]}),(0,s.jsx)(c.aY,{children:R?(0,s.jsx)("div",{className:"text-center py-6",children:"Chargement..."}):0===r.length?(0,s.jsx)("div",{className:"text-center py-6 text-muted-foreground",children:"Aucune demande trouv\xe9e"}):(0,s.jsxs)(u.iA,{children:[(0,s.jsx)(u.xD,{children:(0,s.jsxs)(u.SC,{children:[(0,s.jsx)(u.ss,{children:"Type"}),(0,s.jsx)(u.ss,{children:"Titre"}),(0,s.jsx)(u.ss,{children:"Description"}),(0,s.jsx)(u.ss,{children:"Statut"}),(0,s.jsx)(u.ss,{children:"Date de cr\xe9ation"})]})}),(0,s.jsx)(u.RM,{children:r.map(e=>(0,s.jsxs)(u.SC,{children:[(0,s.jsx)(u.pj,{children:O(e.type)}),(0,s.jsx)(u.pj,{className:"font-medium",children:e.title}),(0,s.jsx)(u.pj,{className:"max-w-xs truncate",children:e.description}),(0,s.jsx)(u.pj,{children:F(e.status)}),(0,s.jsx)(u.pj,{children:new Date(e.created_at).toLocaleDateString("fr-FR")})]},e.id))})]})})]})]})})]}),(0,s.jsx)(d.n,{})]})}},29155:function(e,t,r){"use strict";r.d(t,{C:function(){return d}});var s=r(57437);r(2265);var a=r(39213),n=r(39311);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},86110:function(e,t,r){"use strict";r.d(t,{Ol:function(){return d},SZ:function(){return c},Zb:function(){return i},aY:function(){return o},ll:function(){return l}});var s=r(57437),a=r(2265),n=r(39311);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});d.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},58094:function(e,t,r){"use strict";r.d(t,{Bw:function(){return p},Ph:function(){return o},Ql:function(){return j},i4:function(){return x},ki:function(){return u}});var s=r(57437),a=r(2265),n=r(65163),i=r(83523),d=r(9224),l=r(62442),c=r(39311);let o=n.fC;n.ZA;let u=n.B4,x=a.forwardRef((e,t)=>{let{className:r,children:a,...d}=e;return(0,s.jsxs)(n.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...d,children:[a,(0,s.jsx)(n.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=n.xz.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})});m.displayName=n.u_.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=n.$G.displayName;let p=a.forwardRef((e,t)=>{let{className:r,children:a,position:i="popper",...d}=e;return(0,s.jsx)(n.h_,{children:(0,s.jsxs)(n.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...d,children:[(0,s.jsx)(m,{}),(0,s.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(f,{})]})})});p.displayName=n.VY.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})});h.displayName=n.__.displayName;let j=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,s.jsxs)(n.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(n.eT,{children:a})]})});j.displayName=n.ck.displayName;let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...a})});v.displayName=n.Z0.displayName},55771:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var s=r(57437),a=r(2265),n=r(39311);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});i.displayName="Textarea"}},function(e){e.O(0,[5781,3127,4984,8251,1357,4410,2440,4962,4808,9461,2971,7864,1744],function(){return e(e.s=13195)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8279],{60531:function(e,r,t){Promise.resolve().then(t.bind(t,69221))},69221:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return I}});var s=t(57437),n=t(2265),a=t(73826),i=t(93575),l=t(6141),o=t(62442),d=t(82549),c=t(78063),u=t(35817),f=t(41827),m=t(76637),x=t(93023),h=t(51908),p=t(29155),g=t(86110),j=t(58094),y=t(32553),v=t(28999),b=t(1391),w=t(62621);let N=e=>{switch(e){case"pending":return(0,s.jsxs)(p.C,{variant:"outline",className:"text-orange-600 border-orange-600",children:[(0,s.jsx)(l.Z,{className:"w-3 h-3 mr-1"}),"En attente"]});case"approved":return(0,s.jsxs)(p.C,{variant:"outline",className:"text-green-600 border-green-600",children:[(0,s.jsx)(o.Z,{className:"w-3 h-3 mr-1"}),"Approuv\xe9e"]});case"rejected":return(0,s.jsxs)(p.C,{variant:"outline",className:"text-red-600 border-red-600",children:[(0,s.jsx)(d.Z,{className:"w-3 h-3 mr-1"}),"Rejet\xe9e"]});case"in_review":return(0,s.jsxs)(p.C,{variant:"outline",className:"text-blue-600 border-blue-600",children:[(0,s.jsx)(c.Z,{className:"w-3 h-3 mr-1"}),"En r\xe9vision"]});default:return(0,s.jsx)(p.C,{variant:"outline",children:e})}},C=e=>(0,s.jsx)(p.C,{variant:"secondary",children:{convention:"Convention",prolongation:"Prolongation",conge:"Cong\xe9",attestation:"Attestation"}[e]||e});function I(){let{user:e}=(0,v.t)(),{requests:r,loading:t,updateStatus:p,error:I}=(0,b.w)(null==e?void 0:e.id,null==e?void 0:e.role),{toast:S}=(0,w.pm)(),[E,_]=(0,n.useState)(""),[T,O]=(0,n.useState)("all"),[R,A]=(0,n.useState)("all"),z=r.filter(e=>{var r,t;let s=e.title.toLowerCase().includes(E.toLowerCase())||(null===(t=e.intern)||void 0===t?void 0:null===(r=t.user)||void 0===r?void 0:r.full_name.toLowerCase().includes(E.toLowerCase())),n="all"===T||e.status===T,a="all"===R||e.type===R;return s&&n&&a}),M=async(r,t)=>{try{await p(r,t,e.id),S({title:"Statut mis \xe0 jour",description:"La demande a \xe9t\xe9 ".concat("approved"===t?"approuv\xe9e":"rejet\xe9e",".")})}catch(e){S({title:"Erreur",description:"Impossible de mettre \xe0 jour le statut de la demande.",variant:"destructive"})}},Z=r.filter(e=>"pending"===e.status).length,k=r.filter(e=>"approved"===e.status).length,J=r.filter(e=>"rejected"===e.status).length;return t?(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Chargement des demandes..."})]})}):I?(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsxs)("p",{className:"text-red-600",children:["Erreur lors du chargement des demandes: ",I]})]})}):(0,s.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Gestion des demandes"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Examinez et approuvez les demandes des stagiaires"})]}),(0,s.jsxs)(x.z,{variant:"outline",children:[(0,s.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Exporter"]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)(g.Zb,{children:[(0,s.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(g.ll,{className:"text-sm font-medium",children:"En attente"}),(0,s.jsx)(l.Z,{className:"h-4 w-4 text-orange-600"})]}),(0,s.jsxs)(g.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:Z}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"N\xe9cessitent votre attention"})]})]}),(0,s.jsxs)(g.Zb,{children:[(0,s.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(g.ll,{className:"text-sm font-medium",children:"Approuv\xe9es"}),(0,s.jsx)(o.Z,{className:"h-4 w-4 text-green-600"})]}),(0,s.jsxs)(g.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:k}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ce mois-ci"})]})]}),(0,s.jsxs)(g.Zb,{children:[(0,s.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(g.ll,{className:"text-sm font-medium",children:"Rejet\xe9es"}),(0,s.jsx)(d.Z,{className:"h-4 w-4 text-red-600"})]}),(0,s.jsxs)(g.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:J}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ce mois-ci"})]})]})]}),(0,s.jsxs)(g.Zb,{children:[(0,s.jsx)(g.Ol,{children:(0,s.jsx)(g.ll,{children:"Filtrer les demandes"})}),(0,s.jsx)(g.aY,{children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(h.I,{placeholder:"Rechercher par titre ou nom du stagiaire...",value:E,onChange:e=>_(e.target.value),className:"pl-8"})]})}),(0,s.jsxs)(j.Ph,{value:T,onValueChange:O,children:[(0,s.jsx)(j.i4,{className:"w-40",children:(0,s.jsx)(j.ki,{placeholder:"Statut"})}),(0,s.jsxs)(j.Bw,{children:[(0,s.jsx)(j.Ql,{value:"all",children:"Tous les statuts"}),(0,s.jsx)(j.Ql,{value:"pending",children:"En attente"}),(0,s.jsx)(j.Ql,{value:"approved",children:"Approuv\xe9es"}),(0,s.jsx)(j.Ql,{value:"rejected",children:"Rejet\xe9es"}),(0,s.jsx)(j.Ql,{value:"in_review",children:"En r\xe9vision"})]})]}),(0,s.jsxs)(j.Ph,{value:R,onValueChange:A,children:[(0,s.jsx)(j.i4,{className:"w-40",children:(0,s.jsx)(j.ki,{placeholder:"Type"})}),(0,s.jsxs)(j.Bw,{children:[(0,s.jsx)(j.Ql,{value:"all",children:"Tous les types"}),(0,s.jsx)(j.Ql,{value:"convention",children:"Convention"}),(0,s.jsx)(j.Ql,{value:"prolongation",children:"Prolongation"}),(0,s.jsx)(j.Ql,{value:"conge",children:"Cong\xe9"}),(0,s.jsx)(j.Ql,{value:"attestation",children:"Attestation"})]})]})]})})]}),(0,s.jsxs)(g.Zb,{children:[(0,s.jsxs)(g.Ol,{children:[(0,s.jsxs)(g.ll,{children:["Demandes (",z.length,")"]}),(0,s.jsx)(g.SZ,{children:"Liste de toutes les demandes soumises par les stagiaires"})]}),(0,s.jsx)(g.aY,{children:0===z.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(m.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Aucune demande trouv\xe9e"})]}):(0,s.jsxs)(y.iA,{children:[(0,s.jsx)(y.xD,{children:(0,s.jsxs)(y.SC,{children:[(0,s.jsx)(y.ss,{children:"Stagiaire"}),(0,s.jsx)(y.ss,{children:"Type"}),(0,s.jsx)(y.ss,{children:"Titre"}),(0,s.jsx)(y.ss,{children:"Date de soumission"}),(0,s.jsx)(y.ss,{children:"Statut"}),(0,s.jsx)(y.ss,{children:"Actions"})]})}),(0,s.jsx)(y.RM,{children:z.map(e=>{var r,t;return(0,s.jsxs)(y.SC,{children:[(0,s.jsx)(y.pj,{className:"font-medium",children:null===(t=e.intern)||void 0===t?void 0:null===(r=t.user)||void 0===r?void 0:r.full_name}),(0,s.jsx)(y.pj,{children:C(e.type)}),(0,s.jsx)(y.pj,{children:e.title}),(0,s.jsx)(y.pj,{children:(0,a.ZP)(new Date(e.submitted_at),"dd MMM yyyy",{locale:i.fr})}),(0,s.jsx)(y.pj,{children:N(e.status)}),(0,s.jsx)(y.pj,{children:"pending"===e.status&&(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(x.z,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-50",onClick:()=>M(e.id,"approved"),children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})}),(0,s.jsx)(x.z,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-50",onClick:()=>M(e.id,"rejected"),children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})]})}},29155:function(e,r,t){"use strict";t.d(r,{C:function(){return l}});var s=t(57437);t(2265);var n=t(39213),a=t(39311);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:t}),r),...n})}},93023:function(e,r,t){"use strict";t.d(r,{z:function(){return d}});var s=t(57437),n=t(2265),a=t(67256),i=t(39213),l=t(39311);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,r)=>{let{className:t,variant:n,size:i,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:t})),ref:r,...c})});d.displayName="Button"},86110:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var s=t(57437),n=t(2265),a=t(39311);let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});i.displayName="Card";let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})});u.displayName="CardFooter"},51908:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var s=t(57437),n=t(2265),a=t(39311);let i=n.forwardRef((e,r)=>{let{className:t,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},58094:function(e,r,t){"use strict";t.d(r,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return g},i4:function(){return f},ki:function(){return u}});var s=t(57437),n=t(2265),a=t(65163),i=t(83523),l=t(9224),o=t(62442),d=t(39311);let c=a.fC;a.ZA;let u=a.B4,f=n.forwardRef((e,r)=>{let{className:t,children:n,...l}=e;return(0,s.jsxs)(a.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[n,(0,s.jsx)(a.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=a.xz.displayName;let m=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(a.u_,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=a.u_.displayName;let x=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(a.$G,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=a.$G.displayName;let h=n.forwardRef((e,r)=>{let{className:t,children:n,position:i="popper",...l}=e;return(0,s.jsx)(a.h_,{children:(0,s.jsxs)(a.VY,{ref:r,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,s.jsx)(m,{}),(0,s.jsx)(a.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,s.jsx)(x,{})]})})});h.displayName=a.VY.displayName;let p=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(a.__,{ref:r,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})});p.displayName=a.__.displayName;let g=n.forwardRef((e,r)=>{let{className:t,children:n,...i}=e;return(0,s.jsxs)(a.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(a.wU,{children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(a.eT,{children:n})]})});g.displayName=a.ck.displayName;let j=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(a.Z0,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...n})});j.displayName=a.Z0.displayName},32553:function(e,r,t){"use strict";t.d(r,{RM:function(){return o},SC:function(){return c},iA:function(){return i},pj:function(){return f},ss:function(){return u},xD:function(){return l}});var s=t(57437),n=t(2265),a=t(39311);let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,a.cn)("w-full caption-bottom text-sm",t),...n})})});i.displayName="Table";let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("thead",{ref:r,className:(0,a.cn)("[&_tr]:border-b",t),...n})});l.displayName="TableHeader";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("tbody",{ref:r,className:(0,a.cn)("[&_tr:last-child]:border-0",t),...n})});o.displayName="TableBody";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("tfoot",{ref:r,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})});d.displayName="TableFooter";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("tr",{ref:r,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});c.displayName="TableRow";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("th",{ref:r,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n})});u.displayName="TableHead";let f=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("td",{ref:r,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n})});f.displayName="TableCell";let m=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("caption",{ref:r,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",t),...n})});m.displayName="TableCaption"},1391:function(e,r,t){"use strict";t.d(r,{w:function(){return i}});var s=t(2265),n=t(19658),a=t(28999);function i(){let[e,r]=(0,s.useState)([]),[t,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null),{user:d}=(0,a.t)(),c=async()=>{try{let e;if(i(!0),o(null),!d){r([]);return}if("intern"===d.role){let{data:e}=await n.MJ.getAll();if(e){let t=e.filter(e=>{var r;return(null===(r=e.intern)||void 0===r?void 0:r.user_id)===d.id});r(t)}}else(e=await n.MJ.getAll()).data&&r(e.data);(null==e?void 0:e.error)&&o(e.error.message)}catch(e){o(e.message||"Erreur lors du chargement des demandes")}finally{i(!1)}},u=async e=>{try{let r=await n.MJ.create(e);if(r.error)return o(r.error.message),!1;return await c(),!0}catch(e){return o(e.message),!1}},f=async(e,r)=>{try{return await c(),!0}catch(e){return o(e.message),!1}};return(0,s.useEffect)(()=>{c()},[d]),{requests:e,loading:t,error:l,refetch:c,createRequest:u,updateRequest:f}}},62621:function(e,r,t){"use strict";t.d(r,{pm:function(){return f}});var s=t(2265);let n=0,a=new Map,i=e=>{if(a.has(e))return;let r=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);a.set(e,r)},l=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...r}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function f(){let[e,r]=s.useState(d);return s.useEffect(()=>(o.push(r),()=>{let e=o.indexOf(r);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},23848:function(e,r,t){"use strict";t.d(r,{e:function(){return a}});var s=t(84756);let n=(0,s.eI)("https://blqzunqikyrwzelsbbzh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJscXp1bnFpa3lyd3plbHNiYnpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyOTMzMTcsImV4cCI6MjA2Mzg2OTMxN30.QMttUMb_h6zAgFgb2yLD6jMRn9xlhDRsCuP5EPrGYgk");class a{static async signIn(e,r){try{let{data:t,error:s}=await n.auth.signInWithPassword({email:e,password:r});if(s)throw s;return t}catch(e){throw console.error("Sign in error:",e),e}}static async signUp(e,r,t){try{let{data:s,error:a}=await n.auth.signUp({email:e,password:r,options:{data:t}});if(a)throw a;return s}catch(e){throw console.error("Sign up error:",e),e}}static async signOut(){try{let{error:e}=await n.auth.signOut();if(e)throw e}catch(e){throw console.error("Sign out error:",e),e}}static async getCurrentUser(){try{let{data:{user:e}}=await n.auth.getUser();if(!e)return null;let{data:r,error:t}=await n.from("users").select("*").eq("id",e.id).single();if(t)throw t;return{user:e,userData:r}}catch(e){return console.error("Get current user error:",e),null}}static async updateProfile(e,r){try{let{data:t,error:s}=await n.from("users").update(r).eq("id",e).select().single();if(s)throw s;return t}catch(e){throw console.error("Update profile error:",e),e}}static async getSession(){try{let{data:{session:e}}=await n.auth.getSession();return e}catch(e){return console.error("Get session error:",e),null}}static async refreshUser(e){try{let{data:r,error:t}=await n.from("users").select("*").eq("id",e).single();if(t)throw t;return r}catch(e){return console.error("Refresh user error:",e),null}}}},19658:function(e,r,t){"use strict";t.d(r,{oU:function(){return l},MJ:function(){return o},OQ:function(){return i}});var s=t(54410);t(23848);let n="https://blqzunqikyrwzelsbbzh.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJscXp1bnFpa3lyd3plbHNiYnpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyOTMzMTcsImV4cCI6MjA2Mzg2OTMxN30.QMttUMb_h6zAgFgb2yLD6jMRn9xlhDRsCuP5EPrGYgk";if(!n||!a)throw Error("Missing Supabase environment variables");let i=(0,s.createBrowserClient)(n,a),l={async getAll(){try{let{data:e,error:r}=await i.from("interns").select("\n          *,\n          user:users(*),\n          tutor:users!interns_tutor_id_fkey(*)\n        ");return{data:e,error:r}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des stagiaires:",e),{data:null,error:{message:"Erreur de connexion"}}}},async getByUser(e){try{let{data:r,error:t}=await i.from("interns").select("\n          *,\n          user:users(*),\n          tutor:users!interns_tutor_id_fkey(*)\n        ").eq("user_id",e).single();return{data:r,error:t}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration du stagiaire:",e),{data:null,error:{message:"Erreur de connexion"}}}},async create(e){try{let{data:r,error:t}=await i.from("interns").insert(e).select();return{data:r,error:t}}catch(e){return console.error("Erreur lors de la cr\xe9ation du stagiaire:",e),{data:null,error:{message:"Erreur de cr\xe9ation"}}}}},o={async getAll(){try{let{data:e,error:r}=await i.from("requests").select("\n          *,\n          intern:interns(\n            *,\n            user:users(*)\n          )\n        ").order("created_at",{ascending:!1});return{data:e,error:r}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des demandes:",e),{data:null,error:{message:"Erreur de connexion"}}}},async getByIntern(e){try{let{data:r,error:t}=await i.from("requests").select("*").eq("intern_id",e).order("created_at",{ascending:!1});return{data:r,error:t}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des demandes:",e),{data:null,error:{message:"Erreur de connexion"}}}},async create(e){try{let{data:r,error:t}=await i.from("requests").insert(e).select();return{data:r,error:t}}catch(e){return console.error("Erreur lors de la cr\xe9ation de la demande:",e),{data:null,error:{message:"Erreur de cr\xe9ation"}}}}}},39311:function(e,r,t){"use strict";t.d(r,{O2:function(){return i},cn:function(){return a}});var s=t(57042),n=t(74769);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,s.W)(r))}function i(e){switch(e){case"intern":return"Stagiaire";case"tutor":return"Tuteur";case"hr":return"Ressources Humaines";case"finance":return"Finance";case"admin":return"Administrateur";default:return"Utilisateur"}}},28999:function(e,r,t){"use strict";t.d(r,{t:function(){return l}});var s=t(59115),n=t(74810),a=t(23848),i=t(19658);let l=(0,s.U)()((0,n.tJ)((e,r)=>({user:null,loading:!1,error:null,signIn:async(r,t)=>{e({loading:!0,error:null});try{let s=await a.e.signIn(r,t);if(null==s?void 0:s.user){let{data:r}=await i.OQ.from("users").select("*").eq("id",s.user.id).single();if(r)return e({user:r,loading:!1}),!0}return e({error:"\xc9chec de la connexion",loading:!1}),!1}catch(r){return e({error:r.message||"Erreur de connexion",loading:!1}),!1}},signOut:async()=>{e({loading:!0});try{await a.e.signOut(),e({user:null,loading:!1,error:null})}catch(r){e({error:r.message||"Erreur de d\xe9connexion",loading:!1})}},signUp:async(r,t,s,n)=>{e({loading:!0,error:null});try{let l=await a.e.signUp(r,t,{full_name:s,role:n});if(null==l?void 0:l.user){let{data:r}=await i.OQ.from("users").insert({id:l.user.id,email:l.user.email,full_name:s,role:n}).select().single();if(r)return e({user:r,loading:!1}),!0}return e({error:"\xc9chec de l'inscription",loading:!1}),!1}catch(r){return e({error:r.message||"Erreur d'inscription",loading:!1}),!1}},refreshUser:async()=>{let t=r().user;if(t)try{let r=await a.e.refreshUser(t.id);r&&e({user:r})}catch(e){console.error("Failed to refresh user:",e)}},clearError:()=>e({error:null}),initializeAuth:async()=>{e({loading:!0});try{let r=await a.e.getSession();if(null==r?void 0:r.user){let{data:t}=await i.OQ.from("users").select("*").eq("id",r.user.id).single();t?e({user:t,loading:!1}):e({user:null,loading:!1})}else e({user:null,loading:!1})}catch(r){console.error("Auth initialization error:",r),e({user:null,loading:!1})}}}),{name:"auth-storage",partialize:e=>({user:e.user})}))}},function(e){e.O(0,[5781,3127,4984,4410,2440,1990,2971,7864,1744],function(){return e(e.s=60531)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7663],{90998:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var a=t(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},76637:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var a=t(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},29409:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var a=t(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},90087:function(e,r,t){Promise.resolve().then(t.bind(t,47226))},47226:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var a=t(57437),n=t(2265),s=t(24033),l=t(28999),i=t(68461),o=t(4808),c=t(39501);function u(e){let{children:r}=e,{user:t,loading:u,initializeAuth:d}=(0,l.t)(),h=(0,s.useRouter)(),[m,f]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let e=async()=>{await d(),f(!0)};e()},[d]),(0,n.useEffect)(()=>{!m||u||t||h.push("/auth/login")},[t,u,m,h]),!m||u)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):t?(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,a.jsx)("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"container flex h-16 items-center",children:[(0,a.jsx)(o.MainNav,{}),(0,a.jsx)("div",{className:"ml-auto flex items-center space-x-4",children:(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[t.full_name," (",t.role.toUpperCase(),")"]})})]})}),(0,a.jsxs)("div",{className:"flex flex-1",children:[(0,a.jsx)("aside",{className:"w-64 border-r bg-muted/10",children:(0,a.jsx)(i.T,{userRole:t.role})}),(0,a.jsx)("main",{className:"flex-1",children:r})]}),(0,a.jsx)(c.n,{})]}):null}},68461:function(e,r,t){"use strict";t.d(r,{T:function(){return x}});var a=t(57437),n=t(61396),s=t.n(n),l=t(24033),i=t(39311),o=t(25119),c=t(87431),u=t(76637),d=t(25750),h=t(33344),m=t(69057),f=t(90998),g=t(29409);function x(e){let{role:r}=e,t=(0,l.usePathname)(),n={intern:[{href:"/dashboard/intern",label:"Tableau de bord",icon:(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/intern/requests",label:"Mes demandes",icon:(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/intern/documents",label:"Mes documents",icon:(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/intern/profile",label:"Mon profil",icon:(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"})}],tutor:[{href:"/dashboard/tutor",label:"Tableau de bord",icon:(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/tutor/interns",label:"Mes stagiaires",icon:(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/tutor/requests",label:"Demandes",icon:(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/tutor/profile",label:"Mon profil",icon:(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"})}],hr:[{href:"/dashboard/hr",label:"Tableau de bord",icon:(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/hr/interns",label:"Stagiaires",icon:(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/hr/requests",label:"Demandes",icon:(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/hr/documents",label:"Documents",icon:(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/hr/reports",label:"Rapports",icon:(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"})}],finance:[{href:"/dashboard/finance",label:"Tableau de bord",icon:(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/finance/payments",label:"Gratifications",icon:(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/finance/reports",label:"Rapports",icon:(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"})}],admin:[{href:"/dashboard/admin",label:"Tableau de bord",icon:(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/admin/users",label:"Utilisateurs",icon:(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/admin/settings",label:"Param\xe8tres",icon:(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"})},{href:"/dashboard/admin/logs",label:"Journaux",icon:(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"})}]},x=n[r]||[];return(0,a.jsxs)("nav",{className:"grid gap-2 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 mb-4",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(0,i.O2)(r)})]}),x.map(e=>(0,a.jsxs)(s(),{href:e.href,className:(0,i.cn)("flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground transition-colors",t===e.href||e.href!=="/dashboard/".concat(r)&&t.startsWith(e.href)?"bg-accent text-accent-foreground":"transparent"),children:[e.icon,e.label]},e.href))]})}},39501:function(e,r,t){"use strict";t.d(r,{n:function(){return i}});var a=t(57437),n=t(61396),s=t.n(n),l=t(33344);function i(){return(0,a.jsx)("footer",{className:"w-full border-t py-6",children:(0,a.jsxs)("div",{className:"container flex flex-col items-center justify-between gap-4 md:flex-row",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"h-5 w-5"}),(0,a.jsx)("p",{className:"text-sm leading-loose text-muted-foreground",children:"\xa9 2025 Stage+ | Tous droits r\xe9serv\xe9s"})]}),(0,a.jsxs)("nav",{className:"flex gap-4",children:[(0,a.jsx)(s(),{href:"/terms",className:"text-sm leading-loose text-muted-foreground hover:text-foreground",children:"Conditions d'utilisation"}),(0,a.jsx)(s(),{href:"/privacy",className:"text-sm leading-loose text-muted-foreground hover:text-foreground",children:"Politique de confidentialit\xe9"}),(0,a.jsx)(s(),{href:"/contact",className:"text-sm leading-loose text-muted-foreground hover:text-foreground",children:"Contact"})]})]})})}},23848:function(e,r,t){"use strict";t.d(r,{e:function(){return s}});var a=t(84756);let n=(0,a.eI)("https://blqzunqikyrwzelsbbzh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJscXp1bnFpa3lyd3plbHNiYnpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyOTMzMTcsImV4cCI6MjA2Mzg2OTMxN30.QMttUMb_h6zAgFgb2yLD6jMRn9xlhDRsCuP5EPrGYgk");class s{static async signIn(e,r){try{let{data:t,error:a}=await n.auth.signInWithPassword({email:e,password:r});if(a)throw a;return t}catch(e){throw console.error("Sign in error:",e),e}}static async signUp(e,r,t){try{let{data:a,error:s}=await n.auth.signUp({email:e,password:r,options:{data:t}});if(s)throw s;return a}catch(e){throw console.error("Sign up error:",e),e}}static async signOut(){try{let{error:e}=await n.auth.signOut();if(e)throw e}catch(e){throw console.error("Sign out error:",e),e}}static async getCurrentUser(){try{let{data:{user:e}}=await n.auth.getUser();if(!e)return null;let{data:r,error:t}=await n.from("users").select("*").eq("id",e.id).single();if(t)throw t;return{user:e,userData:r}}catch(e){return console.error("Get current user error:",e),null}}static async updateProfile(e,r){try{let{data:t,error:a}=await n.from("users").update(r).eq("id",e).select().single();if(a)throw a;return t}catch(e){throw console.error("Update profile error:",e),e}}static async getSession(){try{let{data:{session:e}}=await n.auth.getSession();return e}catch(e){return console.error("Get session error:",e),null}}static async refreshUser(e){try{let{data:r,error:t}=await n.from("users").select("*").eq("id",e).single();if(t)throw t;return r}catch(e){return console.error("Refresh user error:",e),null}}}},19658:function(e,r,t){"use strict";t.d(r,{oU:function(){return i},MJ:function(){return o},OQ:function(){return l}});var a=t(54410);t(23848);let n="https://blqzunqikyrwzelsbbzh.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJscXp1bnFpa3lyd3plbHNiYnpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyOTMzMTcsImV4cCI6MjA2Mzg2OTMxN30.QMttUMb_h6zAgFgb2yLD6jMRn9xlhDRsCuP5EPrGYgk";if(!n||!s)throw Error("Missing Supabase environment variables");let l=(0,a.createBrowserClient)(n,s),i={async getAll(){try{let{data:e,error:r}=await l.from("interns").select("\n          *,\n          user:users(*),\n          tutor:users!interns_tutor_id_fkey(*)\n        ");return{data:e,error:r}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des stagiaires:",e),{data:null,error:{message:"Erreur de connexion"}}}},async getByUser(e){try{let{data:r,error:t}=await l.from("interns").select("\n          *,\n          user:users(*),\n          tutor:users!interns_tutor_id_fkey(*)\n        ").eq("user_id",e).single();return{data:r,error:t}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration du stagiaire:",e),{data:null,error:{message:"Erreur de connexion"}}}},async create(e){try{let{data:r,error:t}=await l.from("interns").insert(e).select();return{data:r,error:t}}catch(e){return console.error("Erreur lors de la cr\xe9ation du stagiaire:",e),{data:null,error:{message:"Erreur de cr\xe9ation"}}}}},o={async getAll(){try{let{data:e,error:r}=await l.from("requests").select("\n          *,\n          intern:interns(\n            *,\n            user:users(*)\n          )\n        ").order("created_at",{ascending:!1});return{data:e,error:r}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des demandes:",e),{data:null,error:{message:"Erreur de connexion"}}}},async getByIntern(e){try{let{data:r,error:t}=await l.from("requests").select("*").eq("intern_id",e).order("created_at",{ascending:!1});return{data:r,error:t}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des demandes:",e),{data:null,error:{message:"Erreur de connexion"}}}},async create(e){try{let{data:r,error:t}=await l.from("requests").insert(e).select();return{data:r,error:t}}catch(e){return console.error("Erreur lors de la cr\xe9ation de la demande:",e),{data:null,error:{message:"Erreur de cr\xe9ation"}}}}}},28999:function(e,r,t){"use strict";t.d(r,{t:function(){return i}});var a=t(59115),n=t(74810),s=t(23848),l=t(19658);let i=(0,a.U)()((0,n.tJ)((e,r)=>({user:null,loading:!1,error:null,signIn:async(r,t)=>{e({loading:!0,error:null});try{let a=await s.e.signIn(r,t);if(null==a?void 0:a.user){let{data:r}=await l.OQ.from("users").select("*").eq("id",a.user.id).single();if(r)return e({user:r,loading:!1}),!0}return e({error:"\xc9chec de la connexion",loading:!1}),!1}catch(r){return e({error:r.message||"Erreur de connexion",loading:!1}),!1}},signOut:async()=>{e({loading:!0});try{await s.e.signOut(),e({user:null,loading:!1,error:null})}catch(r){e({error:r.message||"Erreur de d\xe9connexion",loading:!1})}},signUp:async(r,t,a,n)=>{e({loading:!0,error:null});try{let i=await s.e.signUp(r,t,{full_name:a,role:n});if(null==i?void 0:i.user){let{data:r}=await l.OQ.from("users").insert({id:i.user.id,email:i.user.email,full_name:a,role:n}).select().single();if(r)return e({user:r,loading:!1}),!0}return e({error:"\xc9chec de l'inscription",loading:!1}),!1}catch(r){return e({error:r.message||"Erreur d'inscription",loading:!1}),!1}},refreshUser:async()=>{let t=r().user;if(t)try{let r=await s.e.refreshUser(t.id);r&&e({user:r})}catch(e){console.error("Failed to refresh user:",e)}},clearError:()=>e({error:null}),initializeAuth:async()=>{e({loading:!0});try{let r=await s.e.getSession();if(null==r?void 0:r.user){let{data:t}=await l.OQ.from("users").select("*").eq("id",r.user.id).single();t?e({user:t,loading:!1}):e({user:null,loading:!1})}else e({user:null,loading:!1})}catch(r){console.error("Auth initialization error:",r),e({user:null,loading:!1})}}}),{name:"auth-storage",partialize:e=>({user:e.user})}))},74810:function(e,r,t){"use strict";t.d(r,{tJ:function(){return n}});let a=e=>r=>{try{let t=e(r);if(t instanceof Promise)return t;return{then:e=>a(e)(t),catch(e){return this}}}catch(e){return{then(e){return this},catch:r=>a(r)(e)}}},n=(e,r)=>(t,n,s)=>{let l,i={storage:function(e,r){let t;try{t=e()}catch(e){return}return{getItem:e=>{var a;let n=e=>null===e?null:JSON.parse(e,null==r?void 0:r.reviver),s=null!=(a=t.getItem(e))?a:null;return s instanceof Promise?s.then(n):n(s)},setItem:(e,a)=>t.setItem(e,JSON.stringify(a,null==r?void 0:r.replacer)),removeItem:e=>t.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,r)=>({...r,...e}),...r},o=!1,c=new Set,u=new Set,d=i.storage;if(!d)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...e)},n,s);let h=()=>{let e=i.partialize({...n()});return d.setItem(i.name,{state:e,version:i.version})},m=s.setState;s.setState=(e,r)=>{m(e,r),h()};let f=e((...e)=>{t(...e),h()},n,s);s.getInitialState=()=>f;let g=()=>{var e,r;if(!d)return;o=!1,c.forEach(e=>{var r;return e(null!=(r=n())?r:f)});let s=(null==(r=i.onRehydrateStorage)?void 0:r.call(i,null!=(e=n())?e:f))||void 0;return a(d.getItem.bind(d))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate){let r=i.migrate(e.state,e.version);return r instanceof Promise?r.then(e=>[!0,e]):[!0,r]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var r;let[a,s]=e;if(t(l=i.merge(s,null!=(r=n())?r:f),!0),a)return h()}).then(()=>{null==s||s(l,void 0),l=n(),o=!0,u.forEach(e=>e(l))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{i={...i,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},i.skipHydration||g(),l||f}},59115:function(e,r,t){"use strict";t.d(r,{U:function(){return o}});var a=t(2265);let n=e=>{let r;let t=new Set,a=(e,a)=>{let n="function"==typeof e?e(r):e;if(!Object.is(n,r)){let e=r;r=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},r,n),t.forEach(t=>t(r,e))}},n=()=>r,s={setState:a,getState:n,getInitialState:()=>l,subscribe:e=>(t.add(e),()=>t.delete(e))},l=r=e(a,n,s);return s},s=e=>e?n(e):n,l=e=>e,i=e=>{let r=s(e),t=e=>(function(e,r=l){let t=a.useSyncExternalStore(e.subscribe,()=>r(e.getState()),()=>r(e.getInitialState()));return a.useDebugValue(t),t})(r,e);return Object.assign(t,r),t},o=e=>e?i(e):i}},function(e){e.O(0,[5781,3127,4984,8251,1357,4410,4808,2971,7864,1744],function(){return e(e.s=90087)}),_N_E=e.O()}]);
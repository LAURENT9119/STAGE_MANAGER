(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6120],{1295:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var r=a(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},64280:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var r=a(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},49036:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var r=a(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},35194:function(e,s,a){Promise.resolve().then(a.bind(a,57489))},57489:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Y}});var r=a(57437),t=a(2265),i=a(4808),l=a(68461),n=a(39501),c=a(93023),d=a(51908),o=a(66672),m=a(55771),u=a(85744),x=a(42210),h=a(56989),p=a(73763),f=a(85184),j=a(94977),g=a(9381),v="Switch",[y,N]=(0,h.b)(v),[b,_]=y(v),w=t.forwardRef((e,s)=>{let{__scopeSwitch:a,name:i,checked:l,defaultChecked:n,required:c,disabled:d,value:o="on",onCheckedChange:m,form:h,...f}=e,[j,v]=t.useState(null),y=(0,x.e)(s,e=>v(e)),N=t.useRef(!1),_=!j||h||!!j.closest("form"),[w=!1,k]=(0,p.T)({prop:l,defaultProp:n,onChange:m});return(0,r.jsxs)(b,{scope:a,checked:w,disabled:d,children:[(0,r.jsx)(g.WV.button,{type:"button",role:"switch","aria-checked":w,"aria-required":c,"data-state":P(w),"data-disabled":d?"":void 0,disabled:d,value:o,...f,ref:y,onClick:(0,u.M)(e.onClick,e=>{k(e=>!e),_&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),_&&(0,r.jsx)(S,{control:j,bubbles:!N.current,name:i,value:o,checked:w,required:c,disabled:d,form:h,style:{transform:"translateX(-100%)"}})]})});w.displayName=v;var k="SwitchThumb",C=t.forwardRef((e,s)=>{let{__scopeSwitch:a,...t}=e,i=_(k,a);return(0,r.jsx)(g.WV.span,{"data-state":P(i.checked),"data-disabled":i.disabled?"":void 0,...t,ref:s})});C.displayName=k;var S=e=>{let{control:s,checked:a,bubbles:i=!0,...l}=e,n=t.useRef(null),c=(0,f.D)(a),d=(0,j.t)(s);return t.useEffect(()=>{let e=n.current,s=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(s,"checked"),t=r.set;if(c!==a&&t){let s=new Event("click",{bubbles:i});t.call(e,a),e.dispatchEvent(s)}},[c,a,i]),(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...l,tabIndex:-1,ref:n,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function P(e){return e?"checked":"unchecked"}var M=a(39311);let Z=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(w,{className:(0,M.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...t,ref:s,children:(0,r.jsx)(C,{className:(0,M.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});Z.displayName=w.displayName;var z=a(67579),E=a(86110),I="horizontal",T=["horizontal","vertical"],F=t.forwardRef((e,s)=>{let{decorative:a,orientation:t=I,...i}=e,l=T.includes(t)?t:I;return(0,r.jsx)(g.WV.div,{"data-orientation":l,...a?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"},...i,ref:s})});F.displayName="Separator";let O=t.forwardRef((e,s)=>{let{className:a,orientation:t="horizontal",decorative:i=!0,...l}=e;return(0,r.jsx)(F,{ref:s,decorative:i,orientation:t,className:(0,M.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",a),...l})});O.displayName=F.displayName;var q=a(62621),R=a(19658),L=a(64280),U=a(92295),G=a(29409),V=a(1295),A=a(49036),D=a(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Q=(0,D.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);function Y(){let[e,s]=(0,t.useState)({site_name:"Plateforme de Gestion des Stagiaires",site_description:"Application web de gestion des stagiaires avec demandes en ligne",logo_url:"",primary_color:"#3b82f6",email_notifications:!0,auto_approval:!1,maintenance_mode:!1,max_file_size:10,allowed_file_types:"pdf,doc,docx,jpg,png",smtp_host:"",smtp_port:587,smtp_user:"",smtp_password:"",session_timeout:24,password_min_length:8,require_2fa:!1}),[a,u]=(0,t.useState)(!0),[x,h]=(0,t.useState)(!1),{toast:p}=(0,q.pm)();(0,t.useEffect)(()=>{f()},[]);let f=async()=>{try{let{data:e,error:a}=await R.OQ.from("system_settings").select("*").single();if(a&&"PGRST116"!==a.code)throw a;e&&s(e)}catch(e){console.error("Erreur lors du chargement des param\xe8tres:",e),p({title:"Information",description:"Utilisation des param\xe8tres par d\xe9faut"})}finally{u(!1)}},j=async()=>{h(!0);try{let{error:s}=await R.OQ.from("system_settings").upsert([e],{onConflict:"id"});if(s)throw s;p({title:"Succ\xe8s",description:"Param\xe8tres sauvegard\xe9s avec succ\xe8s"})}catch(e){console.error("Erreur lors de la sauvegarde:",e),p({title:"Erreur",description:"Impossible de sauvegarder les param\xe8tres",variant:"destructive"})}finally{h(!1)}},g=async e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r)try{let e=r.name.split(".").pop(),a="logo.".concat(e),{error:t}=await R.OQ.storage.from("assets").upload(a,r,{upsert:!0});if(t)throw t;let{data:i}=R.OQ.storage.from("assets").getPublicUrl(a);s(e=>({...e,logo_url:i.publicUrl})),p({title:"Succ\xe8s",description:"Logo t\xe9l\xe9charg\xe9 avec succ\xe8s"})}catch(e){console.error("Erreur lors du t\xe9l\xe9chargement:",e),p({title:"Erreur",description:"Impossible de t\xe9l\xe9charger le logo",variant:"destructive"})}},v=async()=>{try{p({title:"Test d'email",description:"Configuration email test\xe9e avec succ\xe8s"})}catch(e){p({title:"Erreur",description:"\xc9chec du test de configuration email",variant:"destructive"})}};return a?(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,r.jsx)("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,r.jsx)("div",{className:"container flex h-16 items-center",children:(0,r.jsx)(i.MainNav,{role:"admin"})})}),(0,r.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[(0,r.jsx)("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:(0,r.jsx)(l.T,{role:"admin"})}),(0,r.jsx)("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Chargement des param\xe8tres..."})]})})})]}),(0,r.jsx)(n.n,{})]}):(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,r.jsx)("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,r.jsx)("div",{className:"container flex h-16 items-center",children:(0,r.jsx)(i.MainNav,{role:"admin"})})}),(0,r.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[(0,r.jsx)("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:(0,r.jsx)(l.T,{role:"admin"})}),(0,r.jsx)("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Param\xe8tres"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"G\xe9rez les param\xe8tres de la plateforme."})]}),(0,r.jsxs)(c.z,{onClick:j,disabled:x,children:[x?(0,r.jsx)(L.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(U.Z,{className:"mr-2 h-4 w-4"}),"Sauvegarder"]})]}),(0,r.jsxs)(z.mQ,{defaultValue:"general",className:"space-y-4",children:[(0,r.jsxs)(z.dr,{children:[(0,r.jsxs)(z.SP,{value:"general",children:[(0,r.jsx)(G.Z,{className:"mr-2 h-4 w-4"}),"G\xe9n\xe9ral"]}),(0,r.jsxs)(z.SP,{value:"email",children:[(0,r.jsx)(V.Z,{className:"mr-2 h-4 w-4"}),"Email"]}),(0,r.jsxs)(z.SP,{value:"security",children:[(0,r.jsx)(A.Z,{className:"mr-2 h-4 w-4"}),"S\xe9curit\xe9"]}),(0,r.jsxs)(z.SP,{value:"notifications",children:[(0,r.jsx)(Q,{className:"mr-2 h-4 w-4"}),"Notifications"]})]}),(0,r.jsx)(z.nU,{value:"general",className:"space-y-4",children:(0,r.jsxs)(E.Zb,{children:[(0,r.jsxs)(E.Ol,{children:[(0,r.jsx)(E.ll,{children:"Informations g\xe9n\xe9rales"}),(0,r.jsx)(E.SZ,{children:"Param\xe8tres de base de la plateforme"})]}),(0,r.jsxs)(E.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"site-name",children:"Nom du site"}),(0,r.jsx)(d.I,{id:"site-name",value:e.site_name,onChange:e=>s(s=>({...s,site_name:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"primary-color",children:"Couleur principale"}),(0,r.jsx)(d.I,{id:"primary-color",type:"color",value:e.primary_color,onChange:e=>s(s=>({...s,primary_color:e.target.value}))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"site-description",children:"Description du site"}),(0,r.jsx)(m.g,{id:"site-description",value:e.site_description,onChange:e=>s(s=>({...s,site_description:e.target.value})),rows:3})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"logo",children:"Logo du site"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[e.logo_url&&(0,r.jsx)("img",{src:e.logo_url,alt:"Logo",className:"h-16 w-16 object-contain border rounded"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.I,{id:"logo",type:"file",accept:"image/*",onChange:g,className:"w-fit"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Formats accept\xe9s: JPG, PNG, SVG"})]})]})]}),(0,r.jsx)(O,{}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"max-file-size",children:"Taille max des fichiers (MB)"}),(0,r.jsx)(d.I,{id:"max-file-size",type:"number",value:e.max_file_size,onChange:e=>s(s=>({...s,max_file_size:Number(e.target.value)}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"allowed-types",children:"Types de fichiers autoris\xe9s"}),(0,r.jsx)(d.I,{id:"allowed-types",value:e.allowed_file_types,onChange:e=>s(s=>({...s,allowed_file_types:e.target.value})),placeholder:"pdf,doc,docx,jpg,png"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(o._,{children:"Mode maintenance"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"D\xe9sactive l'acc\xe8s \xe0 la plateforme pour les utilisateurs"})]}),(0,r.jsx)(Z,{checked:e.maintenance_mode,onCheckedChange:e=>s(s=>({...s,maintenance_mode:e}))})]})]})]})}),(0,r.jsx)(z.nU,{value:"email",className:"space-y-4",children:(0,r.jsxs)(E.Zb,{children:[(0,r.jsxs)(E.Ol,{children:[(0,r.jsx)(E.ll,{children:"Configuration SMTP"}),(0,r.jsx)(E.SZ,{children:"Param\xe8tres pour l'envoi d'emails"})]}),(0,r.jsxs)(E.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"smtp-host",children:"Serveur SMTP"}),(0,r.jsx)(d.I,{id:"smtp-host",value:e.smtp_host,onChange:e=>s(s=>({...s,smtp_host:e.target.value})),placeholder:"smtp.gmail.com"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"smtp-port",children:"Port SMTP"}),(0,r.jsx)(d.I,{id:"smtp-port",type:"number",value:e.smtp_port,onChange:e=>s(s=>({...s,smtp_port:Number(e.target.value)}))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"smtp-user",children:"Utilisateur SMTP"}),(0,r.jsx)(d.I,{id:"smtp-user",type:"email",value:e.smtp_user,onChange:e=>s(s=>({...s,smtp_user:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"smtp-password",children:"Mot de passe SMTP"}),(0,r.jsx)(d.I,{id:"smtp-password",type:"password",value:e.smtp_password,onChange:e=>s(s=>({...s,smtp_password:e.target.value}))})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(c.z,{onClick:v,variant:"outline",children:"Tester la configuration"})})]})]})}),(0,r.jsx)(z.nU,{value:"security",className:"space-y-4",children:(0,r.jsxs)(E.Zb,{children:[(0,r.jsxs)(E.Ol,{children:[(0,r.jsx)(E.ll,{children:"Param\xe8tres de s\xe9curit\xe9"}),(0,r.jsx)(E.SZ,{children:"Configuration de la s\xe9curit\xe9 et de l'authentification"})]}),(0,r.jsxs)(E.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"session-timeout",children:"Timeout de session (heures)"}),(0,r.jsx)(d.I,{id:"session-timeout",type:"number",value:e.session_timeout,onChange:e=>s(s=>({...s,session_timeout:Number(e.target.value)}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"password-length",children:"Longueur minimale du mot de passe"}),(0,r.jsx)(d.I,{id:"password-length",type:"number",value:e.password_min_length,onChange:e=>s(s=>({...s,password_min_length:Number(e.target.value)}))})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(o._,{children:"Authentification \xe0 deux facteurs requise"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Oblige tous les utilisateurs \xe0 utiliser l'2FA"})]}),(0,r.jsx)(Z,{checked:e.require_2fa,onCheckedChange:e=>s(s=>({...s,require_2fa:e}))})]})]})]})}),(0,r.jsx)(z.nU,{value:"notifications",className:"space-y-4",children:(0,r.jsxs)(E.Zb,{children:[(0,r.jsxs)(E.Ol,{children:[(0,r.jsx)(E.ll,{children:"Param\xe8tres de notifications"}),(0,r.jsx)(E.SZ,{children:"Configuration des notifications automatiques"})]}),(0,r.jsxs)(E.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(o._,{children:"Notifications par email"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Envoyer des notifications par email aux utilisateurs"})]}),(0,r.jsx)(Z,{checked:e.email_notifications,onCheckedChange:e=>s(s=>({...s,email_notifications:e}))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(o._,{children:"Approbation automatique"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Approuver automatiquement certaines demandes"})]}),(0,r.jsx)(Z,{checked:e.auto_approval,onCheckedChange:e=>s(s=>({...s,auto_approval:e}))})]})]})]})})]})]})})]}),(0,r.jsx)(n.n,{})]})}},85184:function(e,s,a){"use strict";a.d(s,{D:function(){return t}});var r=a(2265);function t(e){let s=r.useRef({value:e,previous:e});return r.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}}},function(e){e.O(0,[5781,3127,4984,8251,1357,4410,4808,6082,2971,7864,1744],function(){return e(e.s=35194)}),_N_E=e.O()}]);
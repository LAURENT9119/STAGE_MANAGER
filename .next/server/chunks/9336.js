"use strict";exports.id=9336,exports.ids=[9336],exports.modules={47814:(e,r,t)=>{(0,t(22730).createClient)("https://blqzunqikyrwzelsbbzh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJscXp1bnFpa3lyd3plbHNiYnpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyOTMzMTcsImV4cCI6MjA2Mzg2OTMxN30.QMttUMb_h6zAgFgb2yLD6jMRn9xlhDRsCuP5EPrGYgk")},77988:(e,r,t)=>{t.d(r,{MJ:()=>o,OQ:()=>i,oU:()=>l});var n=t(22730);t(47814);let s="https://blqzunqikyrwzelsbbzh.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJscXp1bnFpa3lyd3plbHNiYnpoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyOTMzMTcsImV4cCI6MjA2Mzg2OTMxN30.QMttUMb_h6zAgFgb2yLD6jMRn9xlhDRsCuP5EPrGYgk";if(!s||!a)throw Error("Missing Supabase environment variables");let i=(0,n.createClient)(s,a,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),l={async getAll(){try{let{data:e,error:r}=await i.from("interns").select(`
          *,
          user:users(*),
          tutor:users!interns_tutor_id_fkey(*)
        `);return{data:e,error:r}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des stagiaires:",e),{data:null,error:{message:"Erreur de connexion"}}}},async getByUser(e){try{let{data:r,error:t}=await i.from("interns").select(`
          *,
          user:users(*),
          tutor:users!interns_tutor_id_fkey(*)
        `).eq("user_id",e).single();return{data:r,error:t}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration du stagiaire:",e),{data:null,error:{message:"Erreur de connexion"}}}},async create(e){try{let{data:r,error:t}=await i.from("interns").insert(e).select();return{data:r,error:t}}catch(e){return console.error("Erreur lors de la cr\xe9ation du stagiaire:",e),{data:null,error:{message:"Erreur de cr\xe9ation"}}}}},o={async getAll(){try{let{data:e,error:r}=await i.from("requests").select(`
          *,
          intern:interns(
            *,
            user:users(*)
          )
        `).order("created_at",{ascending:!1});return{data:e,error:r}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des demandes:",e),{data:null,error:{message:"Erreur de connexion"}}}},async getByIntern(e){try{let{data:r,error:t}=await i.from("requests").select("*").eq("intern_id",e).order("created_at",{ascending:!1});return{data:r,error:t}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des demandes:",e),{data:null,error:{message:"Erreur de connexion"}}}},async create(e){try{let{data:r,error:t}=await i.from("requests").insert(e).select();return{data:r,error:t}}catch(e){return console.error("Erreur lors de la cr\xe9ation de la demande:",e),{data:null,error:{message:"Erreur de cr\xe9ation"}}}}}},69336:(e,r,t)=>{t.d(r,{t:()=>l});var n=t(88944),s=t(48228),a=t(47814),i=t(77988);let l=(0,n.U)()((0,s.tJ)((e,r)=>({user:null,loading:!1,error:null,signIn:async(r,t)=>{e({loading:!0,error:null});try{let n=await a.authService.signIn(r,t);if(n)return e({user:n,loading:!1}),!0;return e({error:"\xc9chec de la connexion",loading:!1}),!1}catch(r){return e({error:r.message||"Erreur de connexion",loading:!1}),!1}},signOut:async()=>{e({loading:!0});try{await a.authService.signOut(),e({user:null,loading:!1,error:null})}catch(r){e({error:r.message||"Erreur de d\xe9connexion",loading:!1})}},signUp:async(r,t,n,s)=>{e({loading:!0,error:null});try{let i=await a.authService.signUp(r,t,n,s);if(i)return e({user:i,loading:!1}),!0;return e({error:"\xc9chec de l'inscription",loading:!1}),!1}catch(r){return e({error:r.message||"Erreur d'inscription",loading:!1}),!1}},refreshUser:async()=>{let t=r().user;if(t)try{let r=await a.authService.refreshUser(t.id);r&&e({user:r})}catch(e){console.error("Failed to refresh user:",e)}},clearError:()=>e({error:null}),initializeAuth:async()=>{e({loading:!0});try{let r=await a.authService.getSession();if(r?.user){let{data:t}=await i.OQ.from("users").select("*").eq("id",r.user.id).single();t?e({user:t,loading:!1}):e({user:null,loading:!1})}else e({user:null,loading:!1})}catch(r){console.error("Auth initialization error:",r),e({user:null,loading:!1})}}}),{name:"auth-storage",partialize:e=>({user:e.user})}))}};
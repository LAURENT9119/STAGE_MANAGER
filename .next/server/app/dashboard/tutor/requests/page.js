(()=>{var e={};e.id=2464,e.ids=[2464],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},51726:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>x,routeModule:()=>h,tree:()=>o});var t=r(73137),a=r(54647),n=r(4183),l=r.n(n),i=r(71775),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(s,d);let c=t.AppPageRouteModule,o=["",{children:["dashboard",{children:["tutor",{children:["requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,90472)),"/home/runner/workspace/app/dashboard/tutor/requests/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,74436)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8912)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"]}],x=["/home/runner/workspace/app/dashboard/tutor/requests/page.tsx"],u="/dashboard/tutor/requests/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new c({definition:{kind:a.x.APP_PAGE,page:"/dashboard/tutor/requests/page",pathname:"/dashboard/tutor/requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},47398:(e,s,r)=>{Promise.resolve().then(r.bind(r,34316))},34316:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>k});var t=r(60080),a=r(9885),n=r(89176),l=r(6450),i=r(65924),d=r(68384),c=r(49424),o=r(54747),x=r(70589),u=r(32293),m=r(7731),h=r(69518),p=r(12029),j=r(15441),g=r(1264),v=r(56206),f=r(51839),b=r(87502),N=r(24796),w=r(33478),_=r(69336),y=r(88405);function k(){let{user:e}=(0,_.t)(),{requests:s,loading:r,error:k,updateStatus:q}=(0,y.w)(e?.id,e?.role),{toast:C}=(0,b.pm)(),[P,S]=(0,a.useState)(""),[z,D]=(0,a.useState)("all"),[E,Q]=(0,a.useState)("all"),[A,T]=(0,a.useState)(null),[R,Z]=(0,a.useState)(!1),[L,M]=(0,a.useState)("");(0,a.useEffect)(()=>{k&&C({title:"Erreur",description:"Impossible de charger les demandes",variant:"destructive"})},[k,C]);let F=s.filter(e=>{let s=e.title.toLowerCase().includes(P.toLowerCase())||e.intern.user.full_name.toLowerCase().includes(P.toLowerCase()),r="all"===z||e.status===z,t="all"===E||e.type===E;return s&&r&&t}),$=e=>t.jsx(N.C,{className:{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",in_review:"bg-blue-100 text-blue-800"}[e]||"bg-gray-100 text-gray-800",children:{pending:"En attente",approved:"Approuv\xe9e",rejected:"Rejet\xe9e",in_review:"En cours d'examen"}[e]||e}),G=e=>({convention:"Convention de stage",prolongation:"Prolongation",conge:"Demande de cong\xe9",attestation:"Attestation",evaluation:"\xc9valuation"})[e]||e,B=async(s,r)=>{if(e){Z(!0);try{await q(s,r,e.id),C({title:"Demande mise \xe0 jour",description:`La demande a \xe9t\xe9 ${"approved"===r?"approuv\xe9e":"rejet\xe9e"} avec succ\xe8s`}),T(null),M("")}catch(e){C({title:"Erreur",description:"Impossible de mettre \xe0 jour la demande",variant:"destructive"})}finally{Z(!1)}}};return r?(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[t.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:t.jsx("div",{className:"container flex h-16 items-center",children:t.jsx(n.MainNav,{role:"tutor"})})}),(0,t.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[t.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:t.jsx(l.T,{role:"tutor"})}),t.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:t.jsx("div",{className:"flex items-center justify-center h-96",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement des demandes..."})]})})})]}),t.jsx(i.n,{})]}):(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[t.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:t.jsx("div",{className:"container flex h-16 items-center",children:t.jsx(n.MainNav,{role:"tutor"})})}),(0,t.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[t.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:t.jsx(l.T,{role:"tutor"})}),t.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-8",children:[t.jsx("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Demandes \xe0 examiner"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Examinez et validez les demandes de vos stagiaires (",s.length," demandes)"]})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsx("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("div",{className:"relative w-full md:w-80",children:[t.jsx(h.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),t.jsx(c.I,{placeholder:"Rechercher une demande...",className:"pl-8",value:P,onChange:e=>S(e.target.value)})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(x.Ph,{value:E,onValueChange:Q,children:[(0,t.jsxs)(x.i4,{className:"w-[180px]",children:[t.jsx(p.Z,{className:"mr-2 h-4 w-4"}),t.jsx(x.ki,{placeholder:"Type"})]}),(0,t.jsxs)(x.Bw,{children:[t.jsx(x.Ql,{value:"all",children:"Tous les types"}),t.jsx(x.Ql,{value:"convention",children:"Convention"}),t.jsx(x.Ql,{value:"prolongation",children:"Prolongation"}),t.jsx(x.Ql,{value:"conge",children:"Cong\xe9"}),t.jsx(x.Ql,{value:"attestation",children:"Attestation"})]})]}),(0,t.jsxs)(x.Ph,{value:z,onValueChange:D,children:[(0,t.jsxs)(x.i4,{className:"w-[180px]",children:[t.jsx(p.Z,{className:"mr-2 h-4 w-4"}),t.jsx(x.ki,{placeholder:"Statut"})]}),(0,t.jsxs)(x.Bw,{children:[t.jsx(x.Ql,{value:"all",children:"Tous les statuts"}),t.jsx(x.Ql,{value:"pending",children:"En attente"}),t.jsx(x.Ql,{value:"in_review",children:"En cours"}),t.jsx(x.Ql,{value:"approved",children:"Approuv\xe9e"}),t.jsx(x.Ql,{value:"rejected",children:"Rejet\xe9e"})]})]})]})]}),t.jsx("div",{className:"rounded-md border",children:(0,t.jsxs)(o.iA,{children:[t.jsx(o.xD,{children:(0,t.jsxs)(o.SC,{children:[t.jsx(o.ss,{children:"Stagiaire"}),t.jsx(o.ss,{children:"Demande"}),t.jsx(o.ss,{children:"Type"}),t.jsx(o.ss,{children:"Date"}),t.jsx(o.ss,{children:"Statut"}),t.jsx(o.ss,{children:"Actions"})]})}),t.jsx(o.RM,{children:0===F.length?t.jsx(o.SC,{children:t.jsx(o.pj,{colSpan:6,className:"text-center py-8",children:0===s.length?"Aucune demande \xe0 examiner":"Aucune demande trouv\xe9e avec ces crit\xe8res"})}):F.map(e=>(0,t.jsxs)(o.SC,{children:[t.jsx(o.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(u.qE,{children:[t.jsx(u.F$,{src:e.intern.user.avatar_url,alt:e.intern.user.full_name}),t.jsx(u.Q5,{children:(0,m.Q)(e.intern.user.full_name)})]}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.intern.user.full_name}),t.jsx("div",{className:"text-sm text-muted-foreground",children:e.intern.department})]})]})}),t.jsx(o.pj,{children:(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.title}),t.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]})}),t.jsx(o.pj,{children:t.jsx("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-blue-100 text-blue-800",children:G(e.type)})}),t.jsx(o.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(j.Z,{className:"h-4 w-4 text-muted-foreground"}),new Date(e.submitted_at).toLocaleDateString("fr-FR")]})}),t.jsx(o.pj,{children:$(e.status)}),t.jsx(o.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.z,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-50",onClick:()=>B(e.id,"approved"),disabled:R,children:t.jsx(g.Z,{className:"h-4 w-4"})}),t.jsx(d.z,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-50",onClick:()=>B(e.id,"rejected"),disabled:R,children:t.jsx(v.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)(f.Vq,{children:[t.jsx(f.hg,{asChild:!0,children:t.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>T(e),children:"D\xe9tails"})}),(0,t.jsxs)(f.cZ,{className:"max-w-2xl",children:[(0,t.jsxs)(f.fK,{children:[t.jsx(f.$N,{children:"D\xe9tails de la demande"}),t.jsx(f.Be,{children:"Examinez et traitez cette demande de stagiaire"})]}),A&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(u.qE,{className:"h-12 w-12",children:[t.jsx(u.F$,{src:A.intern.user.avatar_url}),t.jsx(u.Q5,{children:(0,m.Q)(A.intern.user.full_name)})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-semibold",children:A.intern.user.full_name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:A.intern.department})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{children:[t.jsx(w._,{children:"Type"}),t.jsx("p",{className:"mt-1",children:G(A.type)})]}),(0,t.jsxs)("div",{children:[t.jsx(w._,{children:"Statut"}),t.jsx("div",{className:"mt-1",children:$(A.status)})]}),(0,t.jsxs)("div",{children:[t.jsx(w._,{children:"Date de soumission"}),t.jsx("p",{className:"mt-1",children:new Date(A.submitted_at).toLocaleDateString("fr-FR")})]}),A.reviewed_at&&(0,t.jsxs)("div",{children:[t.jsx(w._,{children:"Date d'examen"}),t.jsx("p",{className:"mt-1",children:new Date(A.reviewed_at).toLocaleDateString("fr-FR")})]})]}),(0,t.jsxs)("div",{children:[t.jsx(w._,{children:"Titre"}),t.jsx("p",{className:"mt-1 font-medium",children:A.title})]}),(0,t.jsxs)("div",{children:[t.jsx(w._,{children:"Description"}),t.jsx("p",{className:"mt-1 p-3 bg-muted rounded-md text-sm",children:A.description})]}),A.reviewer_comments&&(0,t.jsxs)("div",{children:[t.jsx(w._,{children:"Commentaires de l'examinateur"}),t.jsx("p",{className:"mt-1 p-3 bg-muted rounded-md text-sm",children:A.reviewer_comments})]}),"pending"===A.status&&(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t",children:[(0,t.jsxs)(d.z,{onClick:()=>B(A.id,"approved"),disabled:R,className:"bg-green-600 hover:bg-green-700",children:[t.jsx(g.Z,{className:"h-4 w-4 mr-2"}),R?"Traitement...":"Approuver"]}),(0,t.jsxs)(d.z,{variant:"outline",onClick:()=>B(A.id,"rejected"),disabled:R,className:"text-red-600 border-red-600 hover:bg-red-50",children:[t.jsx(v.Z,{className:"h-4 w-4 mr-2"}),R?"Traitement...":"Rejeter"]})]})]})]})]})]})})]},e.id))})]})})]})})]}),t.jsx(i.n,{})]})}},7731:(e,s,r)=>{"use strict";function t(e){if(!e)return"??";let s=e.split(" ");return 1===s.length?s[0].substring(0,2).toUpperCase():(s[0][0]+s[s.length-1][0]).toUpperCase()}r.d(s,{Q:()=>t})},90472:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>d});var t=r(17536);let a=(0,t.createProxy)(String.raw`/home/runner/workspace/app/dashboard/tutor/requests/page.tsx`),{__esModule:n,$$typeof:l}=a,i=a.default,d=i}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[449,2322,6912,6229,251,2662,7471,2129,1232,2589,8384,9176,9336,5924,3903,589,8639,4796,2293,446,8405],()=>r(51726));module.exports=t})();
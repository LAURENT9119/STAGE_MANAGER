(()=>{var e={};e.id=516,e.ids=[516],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},94041:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>x,routeModule:()=>h,tree:()=>o});var r=t(73137),n=t(54647),a=t(4183),l=t.n(a),i=t(71775),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=r.AppPageRouteModule,o=["",{children:["dashboard",{children:["hr",{children:["documents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,21368)),"/home/runner/workspace/app/dashboard/hr/documents/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,74436)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,8912)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],x=["/home/runner/workspace/app/dashboard/hr/documents/page.tsx"],u="/dashboard/hr/documents/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new d({definition:{kind:n.x.APP_PAGE,page:"/dashboard/hr/documents/page",pathname:"/dashboard/hr/documents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},86298:(e,s,t)=>{Promise.resolve().then(t.bind(t,34168))},34168:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var r=t(60080),n=t(9885),a=t(89176),l=t(6450),i=t(65924),c=t(68384),d=t(49424),o=t(54747),x=t(70589),u=t(51839),m=t(97052),h=t(24796),p=t(33478),j=t(76466),g=t(96253),v=t(15441),f=t(43917),N=t(85932),b=t(85574),w=t(62602),y=t(39546),k=t(69518),C=t(12029),S=t(35231),D=t(87502);function _(){let{interns:e,loading:s}=(0,S.L)(),{toast:t}=(0,D.pm)(),[_,Z]=(0,n.useState)([]),[z,q]=(0,n.useState)(!0),[P,E]=(0,n.useState)(""),[A,I]=(0,n.useState)("all"),[T,R]=(0,n.useState)("all"),[Q,L]=(0,n.useState)(null),[B,G]=(0,n.useState)(!1),[M,O]=(0,n.useState)(!1),[$,V]=(0,n.useState)({type:"convention",internId:"",notes:""});(0,n.useEffect)(()=>{F()},[]);let F=async()=>{try{Z([{id:"1",name:"Convention de stage - Marie Dubois",type:"convention",status:"approved",internName:"Marie Dubois",internId:"1",createdDate:"2024-01-15T00:00:00Z",reviewedDate:"2024-01-16T00:00:00Z",size:"245 KB"},{id:"2",name:"Rapport de stage - Pierre Martin",type:"rapport",status:"pending",internName:"Pierre Martin",internId:"2",createdDate:"2024-01-20T00:00:00Z",size:"1.2 MB"},{id:"3",name:"Attestation de stage - Sophie Bernard",type:"attestation",status:"generated",internName:"Sophie Bernard",internId:"3",createdDate:"2024-01-22T00:00:00Z",size:"156 KB"}])}catch(e){console.error("Erreur lors du chargement des documents:",e),t({title:"Erreur",description:"Impossible de charger les documents",variant:"destructive"})}finally{q(!1)}},K=async()=>{if(!$.internId||!$.type){t({title:"Erreur",description:"Veuillez s\xe9lectionner un stagiaire et un type de document",variant:"destructive"});return}try{let s=e.find(e=>e.id===$.internId);if(!s)return;let r={id:Date.now().toString(),name:`${W($.type)} - ${s.user.full_name}`,type:$.type,status:"generated",internName:s.user.full_name,internId:$.internId,createdDate:new Date().toISOString(),size:"150 KB",notes:$.notes};Z(e=>[r,...e]),t({title:"Document g\xe9n\xe9r\xe9",description:`Le document ${W($.type)} a \xe9t\xe9 g\xe9n\xe9r\xe9 avec succ\xe8s`}),O(!1),V({type:"convention",internId:"",notes:""})}catch(e){console.error("Erreur lors de la g\xe9n\xe9ration:",e),t({title:"Erreur",description:"Impossible de g\xe9n\xe9rer le document",variant:"destructive"})}},Y=async(e,s,r)=>{try{Z(t=>t.map(t=>t.id===e?{...t,status:s,reviewedDate:new Date().toISOString(),notes:r||t.notes}:t)),t({title:"Document r\xe9vis\xe9",description:`Le document a \xe9t\xe9 ${"approved"===s?"approuv\xe9":"rejet\xe9"} avec succ\xe8s`}),G(!1),L(null)}catch(e){console.error("Erreur lors de la r\xe9vision:",e),t({title:"Erreur",description:"Impossible de r\xe9viser le document",variant:"destructive"})}},U=e=>{t({title:"T\xe9l\xe9chargement d\xe9marr\xe9",description:`Le document "${e.name}" est en cours de t\xe9l\xe9chargement`})},X=_.filter(e=>{let s=e.name.toLowerCase().includes(P.toLowerCase())||e.internName.toLowerCase().includes(P.toLowerCase()),t="all"===A||e.status===A,r="all"===T||e.type===T;return s&&t&&r}),H=e=>{switch(e){case"approved":return(0,r.jsxs)(h.C,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(g.Z,{className:"w-3 h-3 mr-1"}),"Approuv\xe9"]});case"pending":return(0,r.jsxs)(h.C,{variant:"outline",children:[r.jsx(v.Z,{className:"w-3 h-3 mr-1"}),"En attente"]});case"rejected":return(0,r.jsxs)(h.C,{variant:"destructive",children:[r.jsx(f.Z,{className:"w-3 h-3 mr-1"}),"Rejet\xe9"]});case"generated":return(0,r.jsxs)(h.C,{variant:"secondary",children:[r.jsx(N.Z,{className:"w-3 h-3 mr-1"}),"G\xe9n\xe9r\xe9"]});default:return r.jsx(h.C,{variant:"outline",children:e})}},J=e=>{switch(e){case"approved":return"Approuv\xe9";case"pending":return"En attente";case"rejected":return"Rejet\xe9";case"generated":return"G\xe9n\xe9r\xe9";default:return e}},W=e=>{switch(e){case"convention":return"Convention";case"attestation":return"Attestation";case"rapport":return"Rapport";case"evaluation":return"\xc9valuation";case"contrat":return"Contrat";case"autre":return"Autre";default:return e}},ee={total:_.length,pending:_.filter(e=>"pending"===e.status).length,approved:_.filter(e=>"approved"===e.status).length,generated:_.filter(e=>"generated"===e.status).length};return z||s?(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[r.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsx("div",{className:"container flex h-16 items-center",children:r.jsx(a.MainNav,{role:"hr"})})}),(0,r.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[r.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:r.jsx(l.T,{role:"hr"})}),r.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement des documents..."})]})})})]}),r.jsx(i.n,{})]}):(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[r.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsx("div",{className:"container flex h-16 items-center",children:r.jsx(a.MainNav,{role:"hr"})})}),(0,r.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[r.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:r.jsx(l.T,{role:"hr"})}),r.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Documents"}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["G\xe9rez les documents des stagiaires (",_.length," documents)"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(c.z,{onClick:()=>{let e=["Document,Type,Stagiaire,Statut,Date cr\xe9ation,Date r\xe9vision,Taille",...X.map(e=>[`"${e.name}"`,W(e.type),e.internName,J(e.status),new Date(e.createdDate).toLocaleDateString("fr-FR"),e.reviewedDate?new Date(e.reviewedDate).toLocaleDateString("fr-FR"):"N/A",e.size].join(","))].join("\n"),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=`documents_${new Date().toISOString().split("T")[0]}.csv`,r.click(),t({title:"Export r\xe9ussi",description:"La liste des documents a \xe9t\xe9 export\xe9e avec succ\xe8s"})},variant:"outline",children:[r.jsx(b.Z,{className:"mr-2 h-4 w-4"}),"Exporter"]}),(0,r.jsxs)(u.Vq,{open:M,onOpenChange:O,children:[r.jsx(u.hg,{asChild:!0,children:(0,r.jsxs)(c.z,{children:[r.jsx(w.Z,{className:"mr-2 h-4 w-4"}),"G\xe9n\xe9rer document"]})}),(0,r.jsxs)(u.cZ,{children:[r.jsx(u.fK,{children:r.jsx(u.$N,{children:"G\xe9n\xe9rer un document"})}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(p._,{htmlFor:"type",className:"text-right",children:"Type"}),(0,r.jsxs)(x.Ph,{value:$.type,onValueChange:e=>V({...$,type:e}),children:[r.jsx(x.i4,{className:"col-span-3",children:r.jsx(x.ki,{})}),(0,r.jsxs)(x.Bw,{children:[r.jsx(x.Ql,{value:"convention",children:"Convention de stage"}),r.jsx(x.Ql,{value:"attestation",children:"Attestation"}),r.jsx(x.Ql,{value:"contrat",children:"Contrat"}),r.jsx(x.Ql,{value:"evaluation",children:"\xc9valuation"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(p._,{htmlFor:"intern",className:"text-right",children:"Stagiaire"}),(0,r.jsxs)(x.Ph,{value:$.internId,onValueChange:e=>V({...$,internId:e}),children:[r.jsx(x.i4,{className:"col-span-3",children:r.jsx(x.ki,{placeholder:"S\xe9lectionner un stagiaire"})}),r.jsx(x.Bw,{children:e.map(e=>(0,r.jsxs)(x.Ql,{value:e.id,children:[e.user.full_name," - ",e.department]},e.id))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(p._,{htmlFor:"notes",className:"text-right",children:"Notes"}),r.jsx(j.g,{id:"notes",value:$.notes,onChange:e=>V({...$,notes:e.target.value}),className:"col-span-3",placeholder:"Notes suppl\xe9mentaires..."})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx(c.z,{variant:"outline",onClick:()=>O(!1),children:"Annuler"}),r.jsx(c.z,{onClick:K,children:"G\xe9n\xe9rer"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(m.ll,{className:"text-sm font-medium",children:"Total"}),r.jsx(y.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(m.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:ee.total}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Documents totaux"})]})]}),(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(m.ll,{className:"text-sm font-medium",children:"En attente"}),r.jsx(v.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(m.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:ee.pending}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"\xc0 r\xe9viser"})]})]}),(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(m.ll,{className:"text-sm font-medium",children:"Approuv\xe9s"}),r.jsx(g.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(m.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:ee.approved}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Valid\xe9s"})]})]}),(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(m.ll,{className:"text-sm font-medium",children:"G\xe9n\xe9r\xe9s"}),r.jsx(N.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(m.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:ee.generated}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Par le syst\xe8me"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"relative w-full md:w-80",children:[r.jsx(k.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(d.I,{placeholder:"Rechercher un document...",className:"pl-8",value:P,onChange:e=>E(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(x.Ph,{value:T,onValueChange:e=>R(e),children:[(0,r.jsxs)(x.i4,{className:"w-[180px]",children:[r.jsx(C.Z,{className:"mr-2 h-4 w-4"}),r.jsx(x.ki,{placeholder:"Type"})]}),(0,r.jsxs)(x.Bw,{children:[r.jsx(x.Ql,{value:"all",children:"Tous les types"}),r.jsx(x.Ql,{value:"convention",children:"Convention"}),r.jsx(x.Ql,{value:"attestation",children:"Attestation"}),r.jsx(x.Ql,{value:"rapport",children:"Rapport"}),r.jsx(x.Ql,{value:"evaluation",children:"\xc9valuation"}),r.jsx(x.Ql,{value:"contrat",children:"Contrat"})]})]}),(0,r.jsxs)(x.Ph,{value:A,onValueChange:e=>I(e),children:[(0,r.jsxs)(x.i4,{className:"w-[180px]",children:[r.jsx(C.Z,{className:"mr-2 h-4 w-4"}),r.jsx(x.ki,{placeholder:"Statut"})]}),(0,r.jsxs)(x.Bw,{children:[r.jsx(x.Ql,{value:"all",children:"Tous les statuts"}),r.jsx(x.Ql,{value:"pending",children:"En attente"}),r.jsx(x.Ql,{value:"approved",children:"Approuv\xe9"}),r.jsx(x.Ql,{value:"rejected",children:"Rejet\xe9"}),r.jsx(x.Ql,{value:"generated",children:"G\xe9n\xe9r\xe9"})]})]})]})]}),r.jsx("div",{className:"rounded-md border",children:(0,r.jsxs)(o.iA,{children:[r.jsx(o.xD,{children:(0,r.jsxs)(o.SC,{children:[r.jsx(o.ss,{children:"Document"}),r.jsx(o.ss,{children:"Type"}),r.jsx(o.ss,{children:"Stagiaire"}),r.jsx(o.ss,{children:"Statut"}),r.jsx(o.ss,{children:"Date cr\xe9ation"}),r.jsx(o.ss,{children:"Taille"}),r.jsx(o.ss,{children:"Actions"})]})}),r.jsx(o.RM,{children:0===X.length?r.jsx(o.SC,{children:r.jsx(o.pj,{colSpan:7,className:"text-center py-8",children:"Aucun document trouv\xe9"})}):X.map(e=>(0,r.jsxs)(o.SC,{children:[r.jsx(o.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(y.Z,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:e.name})]})}),r.jsx(o.pj,{children:W(e.type)}),r.jsx(o.pj,{children:e.internName}),r.jsx(o.pj,{children:H(e.status)}),r.jsx(o.pj,{children:new Date(e.createdDate).toLocaleDateString("fr-FR")}),r.jsx(o.pj,{children:e.size}),r.jsx(o.pj,{children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>U(e),children:[r.jsx(b.Z,{className:"h-3 w-3 mr-1"}),"T\xe9l\xe9charger"]}),"pending"===e.status&&r.jsx(c.z,{variant:"outline",size:"sm",onClick:()=>{L(e),G(!0)},children:"R\xe9viser"})]})})]},e.id))})]})}),r.jsx(u.Vq,{open:B,onOpenChange:G,children:(0,r.jsxs)(u.cZ,{children:[r.jsx(u.fK,{children:r.jsx(u.$N,{children:"R\xe9viser le document"})}),Q&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium",children:Q.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Stagiaire: ",Q.internName]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(p._,{htmlFor:"reviewNotes",children:"Notes de r\xe9vision"}),r.jsx(j.g,{id:"reviewNotes",placeholder:"Ajoutez vos commentaires...",defaultValue:Q.notes})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx(c.z,{variant:"outline",onClick:()=>{let e=document.getElementById("reviewNotes")?.value;Y(Q.id,"rejected",e)},children:"Rejeter"}),r.jsx(c.z,{onClick:()=>{let e=document.getElementById("reviewNotes")?.value;Y(Q.id,"approved",e)},children:"Approuver"})]})]})]})})]})})]}),r.jsx(i.n,{})]})}},76466:(e,s,t)=>{"use strict";t.d(s,{g:()=>l});var r=t(60080),n=t(9885),a=t(23161);let l=n.forwardRef(({className:e,...s},t)=>r.jsx("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));l.displayName="Textarea"},21368:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>c});var r=t(17536);let n=(0,r.createProxy)(String.raw`/home/runner/workspace/app/dashboard/hr/documents/page.tsx`),{__esModule:a,$$typeof:l}=n,i=n.default,c=i}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[449,2322,6912,6229,65,2662,7471,3623,3370,2974,8384,9176,9336,5924,3903,7052,589,8639,4796,5231,446],()=>t(94041));module.exports=r})();
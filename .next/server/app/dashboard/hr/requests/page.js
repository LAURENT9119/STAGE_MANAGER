(()=>{var e={};e.id=8279,e.ids=[8279],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},50578:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>x,routeModule:()=>m,tree:()=>o});var r=t(73137),a=t(54647),n=t(4183),l=t.n(n),i=t(71775),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=r.AppPageRouteModule,o=["",{children:["dashboard",{children:["hr",{children:["requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,41191)),"/home/runner/workspace/app/dashboard/hr/requests/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,74436)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,8912)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],x=["/home/runner/workspace/app/dashboard/hr/requests/page.tsx"],u="/dashboard/hr/requests/page",h={require:t,loadChunk:()=>Promise.resolve()},m=new c({definition:{kind:a.x.APP_PAGE,page:"/dashboard/hr/requests/page",pathname:"/dashboard/hr/requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},80734:(e,s,t)=>{Promise.resolve().then(t.bind(t,18933))},18933:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var r=t(60080),a=t(9885),n=t(28090),l=t(47884),i=t(15441),d=t(1264),c=t(56206),o=t(43917),x=t(85574),u=t(69518),h=t(39546),m=t(68384),p=t(49424),j=t(24796),v=t(97052),g=t(70589),f=t(54747),b=t(69336),N=t(88405),w=t(87502);let y=e=>{switch(e){case"pending":return(0,r.jsxs)(j.C,{variant:"outline",className:"text-orange-600 border-orange-600",children:[r.jsx(i.Z,{className:"w-3 h-3 mr-1"}),"En attente"]});case"approved":return(0,r.jsxs)(j.C,{variant:"outline",className:"text-green-600 border-green-600",children:[r.jsx(d.Z,{className:"w-3 h-3 mr-1"}),"Approuv\xe9e"]});case"rejected":return(0,r.jsxs)(j.C,{variant:"outline",className:"text-red-600 border-red-600",children:[r.jsx(c.Z,{className:"w-3 h-3 mr-1"}),"Rejet\xe9e"]});case"in_review":return(0,r.jsxs)(j.C,{variant:"outline",className:"text-blue-600 border-blue-600",children:[r.jsx(o.Z,{className:"w-3 h-3 mr-1"}),"En r\xe9vision"]});default:return r.jsx(j.C,{variant:"outline",children:e})}},q=e=>r.jsx(j.C,{variant:"secondary",children:{convention:"Convention",prolongation:"Prolongation",conge:"Cong\xe9",attestation:"Attestation"}[e]||e});function C(){let{user:e}=(0,b.t)(),{requests:s,loading:t,updateStatus:j,error:C}=(0,N.w)(e?.id,e?.role),{toast:_}=(0,w.pm)(),[P,Z]=(0,a.useState)(""),[k,E]=(0,a.useState)("all"),[A,S]=(0,a.useState)("all"),Q=s.filter(e=>{let s=e.title.toLowerCase().includes(P.toLowerCase())||e.intern?.user?.full_name.toLowerCase().includes(P.toLowerCase()),t="all"===k||e.status===k,r="all"===A||e.type===A;return s&&t&&r}),z=async(s,t)=>{try{await j(s,t,e.id),_({title:"Statut mis \xe0 jour",description:`La demande a \xe9t\xe9 ${"approved"===t?"approuv\xe9e":"rejet\xe9e"}.`})}catch(e){_({title:"Erreur",description:"Impossible de mettre \xe0 jour le statut de la demande.",variant:"destructive"})}},M=s.filter(e=>"pending"===e.status).length,L=s.filter(e=>"approved"===e.status).length,O=s.filter(e=>"rejected"===e.status).length;return t?r.jsx("div",{className:"flex items-center justify-center h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement des demandes..."})]})}):C?r.jsx("div",{className:"flex items-center justify-center h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(o.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsxs)("p",{className:"text-red-600",children:["Erreur lors du chargement des demandes: ",C]})]})}):(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Gestion des demandes"}),r.jsx("p",{className:"text-muted-foreground",children:"Examinez et approuvez les demandes des stagiaires"})]}),(0,r.jsxs)(m.z,{variant:"outline",children:[r.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"Exporter"]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)(v.Zb,{children:[(0,r.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(v.ll,{className:"text-sm font-medium",children:"En attente"}),r.jsx(i.Z,{className:"h-4 w-4 text-orange-600"})]}),(0,r.jsxs)(v.aY,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:M}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"N\xe9cessitent votre attention"})]})]}),(0,r.jsxs)(v.Zb,{children:[(0,r.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(v.ll,{className:"text-sm font-medium",children:"Approuv\xe9es"}),r.jsx(d.Z,{className:"h-4 w-4 text-green-600"})]}),(0,r.jsxs)(v.aY,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:L}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Ce mois-ci"})]})]}),(0,r.jsxs)(v.Zb,{children:[(0,r.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(v.ll,{className:"text-sm font-medium",children:"Rejet\xe9es"}),r.jsx(c.Z,{className:"h-4 w-4 text-red-600"})]}),(0,r.jsxs)(v.aY,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:O}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Ce mois-ci"})]})]})]}),(0,r.jsxs)(v.Zb,{children:[r.jsx(v.Ol,{children:r.jsx(v.ll,{children:"Filtrer les demandes"})}),r.jsx(v.aY,{children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(u.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(p.I,{placeholder:"Rechercher par titre ou nom du stagiaire...",value:P,onChange:e=>Z(e.target.value),className:"pl-8"})]})}),(0,r.jsxs)(g.Ph,{value:k,onValueChange:E,children:[r.jsx(g.i4,{className:"w-40",children:r.jsx(g.ki,{placeholder:"Statut"})}),(0,r.jsxs)(g.Bw,{children:[r.jsx(g.Ql,{value:"all",children:"Tous les statuts"}),r.jsx(g.Ql,{value:"pending",children:"En attente"}),r.jsx(g.Ql,{value:"approved",children:"Approuv\xe9es"}),r.jsx(g.Ql,{value:"rejected",children:"Rejet\xe9es"}),r.jsx(g.Ql,{value:"in_review",children:"En r\xe9vision"})]})]}),(0,r.jsxs)(g.Ph,{value:A,onValueChange:S,children:[r.jsx(g.i4,{className:"w-40",children:r.jsx(g.ki,{placeholder:"Type"})}),(0,r.jsxs)(g.Bw,{children:[r.jsx(g.Ql,{value:"all",children:"Tous les types"}),r.jsx(g.Ql,{value:"convention",children:"Convention"}),r.jsx(g.Ql,{value:"prolongation",children:"Prolongation"}),r.jsx(g.Ql,{value:"conge",children:"Cong\xe9"}),r.jsx(g.Ql,{value:"attestation",children:"Attestation"})]})]})]})})]}),(0,r.jsxs)(v.Zb,{children:[(0,r.jsxs)(v.Ol,{children:[(0,r.jsxs)(v.ll,{children:["Demandes (",Q.length,")"]}),r.jsx(v.SZ,{children:"Liste de toutes les demandes soumises par les stagiaires"})]}),r.jsx(v.aY,{children:0===Q.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(h.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Aucune demande trouv\xe9e"})]}):(0,r.jsxs)(f.iA,{children:[r.jsx(f.xD,{children:(0,r.jsxs)(f.SC,{children:[r.jsx(f.ss,{children:"Stagiaire"}),r.jsx(f.ss,{children:"Type"}),r.jsx(f.ss,{children:"Titre"}),r.jsx(f.ss,{children:"Date de soumission"}),r.jsx(f.ss,{children:"Statut"}),r.jsx(f.ss,{children:"Actions"})]})}),r.jsx(f.RM,{children:Q.map(e=>(0,r.jsxs)(f.SC,{children:[r.jsx(f.pj,{className:"font-medium",children:e.intern?.user?.full_name}),r.jsx(f.pj,{children:q(e.type)}),r.jsx(f.pj,{children:e.title}),r.jsx(f.pj,{children:(0,n.ZP)(new Date(e.submitted_at),"dd MMM yyyy",{locale:l.fr})}),r.jsx(f.pj,{children:y(e.status)}),r.jsx(f.pj,{children:"pending"===e.status&&(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx(m.z,{size:"sm",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-50",onClick:()=>z(e.id,"approved"),children:r.jsx(d.Z,{className:"h-4 w-4"})}),r.jsx(m.z,{size:"sm",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-50",onClick:()=>z(e.id,"rejected"),children:r.jsx(c.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})]})}},41191:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>d});var r=t(17536);let a=(0,r.createProxy)(String.raw`/home/runner/workspace/app/dashboard/hr/requests/page.tsx`),{__esModule:n,$$typeof:l}=a,i=a.default,d=i}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[449,2322,6912,6229,65,2662,7471,3623,1458,2974,8384,9176,9336,5924,3903,7052,589,8639,4796,8405],()=>t(50578));module.exports=r})();
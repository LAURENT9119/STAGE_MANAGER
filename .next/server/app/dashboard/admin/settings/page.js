(()=>{var e={};e.id=6120,e.ids=[6120],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},90813:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>m,routeModule:()=>p,tree:()=>d});var a=r(73137),t=r(54647),i=r(4183),l=r.n(i),n=r(71775),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);r.d(s,c);let o=a.AppPageRouteModule,d=["",{children:["dashboard",{children:["admin",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,51063)),"/home/runner/workspace/app/dashboard/admin/settings/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,74436)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8912)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"]}],m=["/home/runner/workspace/app/dashboard/admin/settings/page.tsx"],x="/dashboard/admin/settings/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new o({definition:{kind:t.x.APP_PAGE,page:"/dashboard/admin/settings/page",pathname:"/dashboard/admin/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},34199:(e,s,r)=>{Promise.resolve().then(r.bind(r,2773))},2773:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>C});var a=r(60080),t=r(9885),i=r(89176),l=r(6450),n=r(65924),c=r(68384),o=r(49424),d=r(33478),m=r(76466),x=r(73195),u=r(23161);let p=t.forwardRef(({className:e,...s},r)=>a.jsx(x.fC,{className:(0,u.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:r,children:a.jsx(x.bU,{className:(0,u.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));p.displayName=x.fC.displayName;var h=r(10999),g=r(97052),f=r(22299);let j=t.forwardRef(({className:e,orientation:s="horizontal",decorative:r=!0,...t},i)=>a.jsx(f.f,{ref:i,decorative:r,orientation:s,className:(0,u.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...t}));j.displayName=f.f.displayName;var v=r(87502),_=r(77988),b=r(20644),y=r(52995),N=r(5987),w=r(59490),k=r(44901),P=r(3514);function C(){let[e,s]=(0,t.useState)({site_name:"Plateforme de Gestion des Stagiaires",site_description:"Application web de gestion des stagiaires avec demandes en ligne",logo_url:"",primary_color:"#3b82f6",email_notifications:!0,auto_approval:!1,maintenance_mode:!1,max_file_size:10,allowed_file_types:"pdf,doc,docx,jpg,png",smtp_host:"",smtp_port:587,smtp_user:"",smtp_password:"",session_timeout:24,password_min_length:8,require_2fa:!1}),[r,x]=(0,t.useState)(!0),[u,f]=(0,t.useState)(!1),{toast:C}=(0,v.pm)();(0,t.useEffect)(()=>{q()},[]);let q=async()=>{try{let{data:e,error:r}=await _.OQ.from("system_settings").select("*").single();if(r&&"PGRST116"!==r.code)throw r;e&&s(e)}catch(e){console.error("Erreur lors du chargement des param\xe8tres:",e),C({title:"Information",description:"Utilisation des param\xe8tres par d\xe9faut"})}finally{x(!1)}},S=async()=>{f(!0);try{let{error:s}=await _.OQ.from("system_settings").upsert([e],{onConflict:"id"});if(s)throw s;C({title:"Succ\xe8s",description:"Param\xe8tres sauvegard\xe9s avec succ\xe8s"})}catch(e){console.error("Erreur lors de la sauvegarde:",e),C({title:"Erreur",description:"Impossible de sauvegarder les param\xe8tres",variant:"destructive"})}finally{f(!1)}},z=async e=>{let r=e.target.files?.[0];if(r)try{let e=r.name.split(".").pop(),a=`logo.${e}`,{error:t}=await _.OQ.storage.from("assets").upload(a,r,{upsert:!0});if(t)throw t;let{data:i}=_.OQ.storage.from("assets").getPublicUrl(a);s(e=>({...e,logo_url:i.publicUrl})),C({title:"Succ\xe8s",description:"Logo t\xe9l\xe9charg\xe9 avec succ\xe8s"})}catch(e){console.error("Erreur lors du t\xe9l\xe9chargement:",e),C({title:"Erreur",description:"Impossible de t\xe9l\xe9charger le logo",variant:"destructive"})}},I=async()=>{try{C({title:"Test d'email",description:"Configuration email test\xe9e avec succ\xe8s"})}catch(e){C({title:"Erreur",description:"\xc9chec du test de configuration email",variant:"destructive"})}};return r?(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[a.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:a.jsx("div",{className:"container flex h-16 items-center",children:a.jsx(i.MainNav,{role:"admin"})})}),(0,a.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[a.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:a.jsx(l.T,{role:"admin"})}),a.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:a.jsx("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement des param\xe8tres..."})]})})})]}),a.jsx(n.n,{})]}):(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[a.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:a.jsx("div",{className:"container flex h-16 items-center",children:a.jsx(i.MainNav,{role:"admin"})})}),(0,a.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[a.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:a.jsx(l.T,{role:"admin"})}),a.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Param\xe8tres"}),a.jsx("p",{className:"text-muted-foreground",children:"G\xe9rez les param\xe8tres de la plateforme."})]}),(0,a.jsxs)(c.z,{onClick:S,disabled:u,children:[u?a.jsx(b.Z,{className:"mr-2 h-4 w-4 animate-spin"}):a.jsx(y.Z,{className:"mr-2 h-4 w-4"}),"Sauvegarder"]})]}),(0,a.jsxs)(h.mQ,{defaultValue:"general",className:"space-y-4",children:[(0,a.jsxs)(h.dr,{children:[(0,a.jsxs)(h.SP,{value:"general",children:[a.jsx(N.Z,{className:"mr-2 h-4 w-4"}),"G\xe9n\xe9ral"]}),(0,a.jsxs)(h.SP,{value:"email",children:[a.jsx(w.Z,{className:"mr-2 h-4 w-4"}),"Email"]}),(0,a.jsxs)(h.SP,{value:"security",children:[a.jsx(k.Z,{className:"mr-2 h-4 w-4"}),"S\xe9curit\xe9"]}),(0,a.jsxs)(h.SP,{value:"notifications",children:[a.jsx(P.Z,{className:"mr-2 h-4 w-4"}),"Notifications"]})]}),a.jsx(h.nU,{value:"general",className:"space-y-4",children:(0,a.jsxs)(g.Zb,{children:[(0,a.jsxs)(g.Ol,{children:[a.jsx(g.ll,{children:"Informations g\xe9n\xe9rales"}),a.jsx(g.SZ,{children:"Param\xe8tres de base de la plateforme"})]}),(0,a.jsxs)(g.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"site-name",children:"Nom du site"}),a.jsx(o.I,{id:"site-name",value:e.site_name,onChange:e=>s(s=>({...s,site_name:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"primary-color",children:"Couleur principale"}),a.jsx(o.I,{id:"primary-color",type:"color",value:e.primary_color,onChange:e=>s(s=>({...s,primary_color:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"site-description",children:"Description du site"}),a.jsx(m.g,{id:"site-description",value:e.site_description,onChange:e=>s(s=>({...s,site_description:e.target.value})),rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"logo",children:"Logo du site"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[e.logo_url&&a.jsx("img",{src:e.logo_url,alt:"Logo",className:"h-16 w-16 object-contain border rounded"}),(0,a.jsxs)("div",{children:[a.jsx(o.I,{id:"logo",type:"file",accept:"image/*",onChange:z,className:"w-fit"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Formats accept\xe9s: JPG, PNG, SVG"})]})]})]}),a.jsx(j,{}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"max-file-size",children:"Taille max des fichiers (MB)"}),a.jsx(o.I,{id:"max-file-size",type:"number",value:e.max_file_size,onChange:e=>s(s=>({...s,max_file_size:Number(e.target.value)}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"allowed-types",children:"Types de fichiers autoris\xe9s"}),a.jsx(o.I,{id:"allowed-types",value:e.allowed_file_types,onChange:e=>s(s=>({...s,allowed_file_types:e.target.value})),placeholder:"pdf,doc,docx,jpg,png"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[a.jsx(d._,{children:"Mode maintenance"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"D\xe9sactive l'acc\xe8s \xe0 la plateforme pour les utilisateurs"})]}),a.jsx(p,{checked:e.maintenance_mode,onCheckedChange:e=>s(s=>({...s,maintenance_mode:e}))})]})]})]})}),a.jsx(h.nU,{value:"email",className:"space-y-4",children:(0,a.jsxs)(g.Zb,{children:[(0,a.jsxs)(g.Ol,{children:[a.jsx(g.ll,{children:"Configuration SMTP"}),a.jsx(g.SZ,{children:"Param\xe8tres pour l'envoi d'emails"})]}),(0,a.jsxs)(g.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"smtp-host",children:"Serveur SMTP"}),a.jsx(o.I,{id:"smtp-host",value:e.smtp_host,onChange:e=>s(s=>({...s,smtp_host:e.target.value})),placeholder:"smtp.gmail.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"smtp-port",children:"Port SMTP"}),a.jsx(o.I,{id:"smtp-port",type:"number",value:e.smtp_port,onChange:e=>s(s=>({...s,smtp_port:Number(e.target.value)}))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"smtp-user",children:"Utilisateur SMTP"}),a.jsx(o.I,{id:"smtp-user",type:"email",value:e.smtp_user,onChange:e=>s(s=>({...s,smtp_user:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"smtp-password",children:"Mot de passe SMTP"}),a.jsx(o.I,{id:"smtp-password",type:"password",value:e.smtp_password,onChange:e=>s(s=>({...s,smtp_password:e.target.value}))})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(c.z,{onClick:I,variant:"outline",children:"Tester la configuration"})})]})]})}),a.jsx(h.nU,{value:"security",className:"space-y-4",children:(0,a.jsxs)(g.Zb,{children:[(0,a.jsxs)(g.Ol,{children:[a.jsx(g.ll,{children:"Param\xe8tres de s\xe9curit\xe9"}),a.jsx(g.SZ,{children:"Configuration de la s\xe9curit\xe9 et de l'authentification"})]}),(0,a.jsxs)(g.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"session-timeout",children:"Timeout de session (heures)"}),a.jsx(o.I,{id:"session-timeout",type:"number",value:e.session_timeout,onChange:e=>s(s=>({...s,session_timeout:Number(e.target.value)}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(d._,{htmlFor:"password-length",children:"Longueur minimale du mot de passe"}),a.jsx(o.I,{id:"password-length",type:"number",value:e.password_min_length,onChange:e=>s(s=>({...s,password_min_length:Number(e.target.value)}))})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[a.jsx(d._,{children:"Authentification \xe0 deux facteurs requise"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Oblige tous les utilisateurs \xe0 utiliser l'2FA"})]}),a.jsx(p,{checked:e.require_2fa,onCheckedChange:e=>s(s=>({...s,require_2fa:e}))})]})]})]})}),a.jsx(h.nU,{value:"notifications",className:"space-y-4",children:(0,a.jsxs)(g.Zb,{children:[(0,a.jsxs)(g.Ol,{children:[a.jsx(g.ll,{children:"Param\xe8tres de notifications"}),a.jsx(g.SZ,{children:"Configuration des notifications automatiques"})]}),(0,a.jsxs)(g.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[a.jsx(d._,{children:"Notifications par email"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Envoyer des notifications par email aux utilisateurs"})]}),a.jsx(p,{checked:e.email_notifications,onCheckedChange:e=>s(s=>({...s,email_notifications:e}))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[a.jsx(d._,{children:"Approbation automatique"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Approuver automatiquement certaines demandes"})]}),a.jsx(p,{checked:e.auto_approval,onCheckedChange:e=>s(s=>({...s,auto_approval:e}))})]})]})]})})]})]})})]}),a.jsx(n.n,{})]})}},51063:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var a=r(17536);let t=(0,a.createProxy)(String.raw`/home/runner/workspace/app/dashboard/admin/settings/page.tsx`),{__esModule:i,$$typeof:l}=t,n=t.default,c=n}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[449,2322,6912,6229,65,2662,1150,9474,3878,2974,8384,9176,9336,5924,3903,7052,999,5352],()=>r(90813));module.exports=a})();
(()=>{var e={};e.id=9598,e.ids=[9598],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44319:(e,r,n)=>{"use strict";n.r(r),n.d(r,{GlobalError:()=>s.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>u,routeModule:()=>f,tree:()=>l});var t=n(73137),o=n(54647),a=n(4183),s=n.n(a),i=n(71775),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);n.d(r,d);let c=t.AppPageRouteModule,l=["",{children:["dashboard",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,68032)),"/home/runner/workspace/app/dashboard/admin/users/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,74436)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,79958)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,51918,23)),"next/dist/client/components/not-found-error"]}],u=["/home/runner/workspace/app/dashboard/admin/users/page.tsx"],m="/dashboard/admin/users/page",h={require:n,loadChunk:()=>Promise.resolve()},f=new c({definition:{kind:o.x.APP_PAGE,page:"/dashboard/admin/users/page",pathname:"/dashboard/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},70627:(e,r,n)=>{Promise.resolve().then(n.bind(n,17482))},17482:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>i});var t=n(60080),o=n(9885);(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/input'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}();var a=n(69518),s=n(26303);function i(){let{user:e}=Object(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e}())(),[r,n]=(0,o.useState)([]),[i,d]=(0,o.useState)(!0),[c,l]=(0,o.useState)(null),[u,m]=(0,o.useState)(""),[h,f]=(0,o.useState)("all");(0,o.useEffect)(()=>{x()},[]);let x=async()=>{try{d(!0);let{data:e,error:r}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("users").select("*").order("created_at",{ascending:!1});if(r)throw r;n(e||[])}catch(e){l(e instanceof Error?e.message:"Erreur lors du chargement")}finally{d(!1)}},p=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet utilisateur ?"))try{let{error:t}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("users").delete().eq("id",e);if(t)throw t;n(r.filter(r=>r.id!==e))}catch(e){l(e instanceof Error?e.message:"Erreur lors de la suppression")}},O=r.filter(e=>{let r=e.email?.toLowerCase().includes(u.toLowerCase())||e.full_name?.toLowerCase().includes(u.toLowerCase()),n="all"===h||e.role===h;return r&&n}),_=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"hr":return"bg-blue-100 text-blue-800";case"tutor":return"bg-green-100 text-green-800";case"intern":return"bg-yellow-100 text-yellow-800";case"finance":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e&&"admin"===e.role?(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{}),(0,t.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[240px_minmax(0,1fr)] lg:gap-10",children:[t.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{})}),t.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Gestion des utilisateurs"}),t.jsx("p",{className:"text-muted-foreground",children:"G\xe9rez tous les utilisateurs de la plateforme"})]}),c&&t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{children:c})}),(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Filtres et recherche"})}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(a.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/input'");throw e.code="MODULE_NOT_FOUND",e}()),{placeholder:"Rechercher par email ou nom...",value:u,onChange:e=>m(e.target.value),className:"pl-8"})]})}),(0,t.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"px-3 py-2 border rounded-md",children:[t.jsx("option",{value:"all",children:"Tous les r\xf4les"}),t.jsx("option",{value:"admin",children:"Administrateur"}),t.jsx("option",{value:"hr",children:"RH"}),t.jsx("option",{value:"tutor",children:"Tuteur"}),t.jsx("option",{value:"intern",children:"Stagiaire"}),t.jsx("option",{value:"finance",children:"Finance"})]})]})})]}),(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:["Utilisateurs (",O.length,")"]}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Liste de tous les utilisateurs enregistr\xe9s"})]}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:i?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===O.length?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucun utilisateur trouv\xe9"}):t.jsx("div",{className:"space-y-4",children:O.map(r=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("h3",{className:"font-medium",children:r.full_name||"Nom non d\xe9fini"}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}()),{className:_(r.role),children:r.role})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r.email}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Cr\xe9\xe9 le ",new Date(r.created_at).toLocaleDateString("fr-FR"),r.last_sign_in_at&&(0,t.jsxs)(t.Fragment,{children:["  â€¢ Derni\xe8re connexion: ",new Date(r.last_sign_in_at).toLocaleDateString("fr-FR")]})]})]}),t.jsx("div",{className:"flex gap-2",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",size:"sm",onClick:()=>p(r.id),disabled:r.id===e.id,children:t.jsx(s.Z,{className:"h-4 w-4"})})})]},r.id))})})]})]})})]}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}()),{})]}):t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Acc\xe8s non autoris\xe9. Seuls les administrateurs peuvent acc\xe9der \xe0 cette page."})})})}},68032:(e,r,n)=>{"use strict";n.r(r),n.d(r,{$$typeof:()=>s,__esModule:()=>a,default:()=>d});var t=n(17536);let o=(0,t.createProxy)(String.raw`/home/runner/workspace/app/dashboard/admin/users/page.tsx`),{__esModule:a,$$typeof:s}=o,i=o.default,d=i}};var r=require("../../../../webpack-runtime.js");r.C(e);var n=e=>r(r.s=e),t=r.X(0,[7255,9913,1902,3207,3903],()=>n(44319));module.exports=t})();
(()=>{var e={};e.id=598,e.ids=[598],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},50116:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>l,routeModule:()=>h,tree:()=>c}),t(26327),t(13321),t(11506),t(35866);var n=t(23191),o=t(88716),a=t(37922),s=t.n(a),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let c=["",{children:["dashboard",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,26327)),"/home/runner/workspace/app/dashboard/admin/users/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,11506)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],l=["/home/runner/workspace/app/dashboard/admin/users/page.tsx"],u="/dashboard/admin/users/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/dashboard/admin/users/page",pathname:"/dashboard/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},67700:(e,r,t)=>{Promise.resolve().then(t.bind(t,64820))},53371:(e,r,t)=>{Promise.resolve().then(t.bind(t,58767))},30229:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},97104:()=>{},64820:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var n=t(10326),o=t(17577),a=t(88307);let s=(0,t(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function i(){let{user:e}=Object(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e}())(),[r,t]=(0,o.useState)([]),[i,d]=(0,o.useState)(!0),[c,l]=(0,o.useState)(null),[u,m]=(0,o.useState)(""),[h,f]=(0,o.useState)("all"),p=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet utilisateur ?"))try{let{error:n}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("users").delete().eq("id",e);if(n)throw n;t(r.filter(r=>r.id!==e))}catch(e){l(e instanceof Error?e.message:"Erreur lors de la suppression")}},O=r.filter(e=>{let r=e.email?.toLowerCase().includes(u.toLowerCase())||e.full_name?.toLowerCase().includes(u.toLowerCase()),t="all"===h||e.role===h;return r&&t}),x=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"hr":return"bg-blue-100 text-blue-800";case"tutor":return"bg-green-100 text-green-800";case"intern":return"bg-yellow-100 text-yellow-800";case"finance":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e&&"admin"===e.role?(0,n.jsxs)("div",{className:"flex min-h-screen flex-col",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{}),(0,n.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[240px_minmax(0,1fr)] lg:gap-10",children:[n.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{})}),n.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Gestion des utilisateurs"}),n.jsx("p",{className:"text-muted-foreground",children:"G\xe9rez tous les utilisateurs de la plateforme"})]}),c&&n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{children:c})}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Filtres et recherche"})}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:(0,n.jsxs)("div",{className:"relative",children:[n.jsx(a.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/input'");throw e.code="MODULE_NOT_FOUND",e}()),{placeholder:"Rechercher par email ou nom...",value:u,onChange:e=>m(e.target.value),className:"pl-8"})]})}),(0,n.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"all",children:"Tous les r\xf4les"}),n.jsx("option",{value:"admin",children:"Administrateur"}),n.jsx("option",{value:"hr",children:"RH"}),n.jsx("option",{value:"tutor",children:"Tuteur"}),n.jsx("option",{value:"intern",children:"Stagiaire"}),n.jsx("option",{value:"finance",children:"Finance"})]})]})})]}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:["Utilisateurs (",O.length,")"]}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Liste de tous les utilisateurs enregistr\xe9s"})]}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:i?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===O.length?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucun utilisateur trouv\xe9"}):n.jsx("div",{className:"space-y-4",children:O.map(r=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"font-medium",children:r.full_name||"Nom non d\xe9fini"}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}()),{className:x(r.role),children:r.role})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r.email}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Cr\xe9\xe9 le ",new Date(r.created_at).toLocaleDateString("fr-FR"),r.last_sign_in_at&&(0,n.jsxs)(n.Fragment,{children:["  â€¢ Derni\xe8re connexion: ",new Date(r.last_sign_in_at).toLocaleDateString("fr-FR")]})]})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",size:"sm",onClick:()=>p(r.id),disabled:r.id===e.id,children:n.jsx(s,{className:"h-4 w-4"})})})]},r.id))})})]})]})})]}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}()),{})]}):n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Acc\xe8s non autoris\xe9. Seuls les administrateurs peuvent acc\xe9der \xe0 cette page."})})})}(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/input'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()},58767:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var n=t(10326),o=t(17577),a=t(35047);function s({children:e}){let{user:r,loading:t,initializeAuth:s}=Object(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e}())();(0,a.useRouter)();let[i,d]=(0,o.useState)(!1);return!i||t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):r?(0,n.jsxs)("div",{className:"flex min-h-screen flex-col",children:[n.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,n.jsxs)("div",{className:"container flex h-16 items-center",children:[n.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{}),n.jsx("div",{className:"ml-auto flex items-center space-x-4",children:(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[r.full_name," (",r.role.toUpperCase(),")"]})})]})}),(0,n.jsxs)("div",{className:"flex flex-1",children:[n.jsx("aside",{className:"w-64 border-r bg-muted/10",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{userRole:r.role})}),n.jsx("main",{className:"flex-1",children:e})]}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}()),{})]}):null}(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}()},62881:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var n=t(17577);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=(...e)=>e.filter((e,r,t)=>!!e&&t.indexOf(e)===r).join(" ");var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:i="",children:d,iconNode:c,...l},u)=>(0,n.createElement)("svg",{ref:u,...s,width:r,height:r,stroke:e,strokeWidth:o?24*Number(t)/Number(r):t,className:a("lucide",i),...l},[...c.map(([e,r])=>(0,n.createElement)(e,r)),...Array.isArray(d)?d:[d]])),d=(e,r)=>{let t=(0,n.forwardRef)(({className:t,...s},d)=>(0,n.createElement)(i,{ref:d,iconNode:r,className:a(`lucide-${o(e)}`,t),...s}));return t.displayName=`${e}`,t}},88307:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});let n=(0,t(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},35047:(e,r,t)=>{"use strict";var n=t(77389);t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},26327:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});let n=(0,t(68570).createProxy)(String.raw`/home/runner/workspace/app/dashboard/admin/users/page.tsx#default`)},13321:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});let n=(0,t(68570).createProxy)(String.raw`/home/runner/workspace/app/dashboard/layout.tsx#default`)},11506:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i,metadata:()=>s});var n=t(19510),o=t(85384),a=t.n(o);t(67272),function(){var e=Error("Cannot find module '@/components/theme-provider'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/toaster'");throw e.code="MODULE_NOT_FOUND",e}();let s={title:"Stage+ | Gestion des Stagiaires",description:"Plateforme de gestion des stagiaires avec demandes en ligne"};function i({children:e}){return n.jsx("html",{lang:"fr",suppressHydrationWarning:!0,children:n.jsx("body",{className:a().className,children:(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/theme-provider'");throw e.code="MODULE_NOT_FOUND",e}()),{attribute:"class",defaultTheme:"light",children:[e,n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/toaster'");throw e.code="MODULE_NOT_FOUND",e}()),{})]})})})}},67272:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[734],()=>t(50116));module.exports=n})();
(()=>{var e={};e.id=4887,e.ids=[4887],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},31858:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>u,routeModule:()=>h,tree:()=>o});var t=s(73137),n=s(54647),a=s(4183),i=s.n(a),d=s(71775),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(r,l);let c=t.AppPageRouteModule,o=["",{children:["dashboard",{children:["intern",{children:["requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58435)),"/home/runner/workspace/app/dashboard/intern/requests/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,74436)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8912)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],u=["/home/runner/workspace/app/dashboard/intern/requests/page.tsx"],x="/dashboard/intern/requests/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new c({definition:{kind:n.x.APP_PAGE,page:"/dashboard/intern/requests/page",pathname:"/dashboard/intern/requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6663:(e,r,s)=>{Promise.resolve().then(s.bind(s,17400))},17400:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>w});var t=s(60080),n=s(9885),a=s(89176),i=s(6450),d=s(65924),l=s(68384),c=s(97052),o=s(24796),u=s(54747),x=s(51839),p=s(49424),h=s(33478),m=s(76466),j=s(70589),v=s(15441),g=s(96253),f=s(34706),y=s(22385),b=s(39546),_=s(69336),q=s(87502),N=s(60667);function w(){let{user:e}=(0,_.t)(),{toast:r}=(0,q.pm)(),[s,w]=(0,n.useState)([]),[C,P]=(0,n.useState)(!0),[S,D]=(0,n.useState)(!1),[k,E]=(0,n.useState)({type:"",title:"",description:"",start_date:"",end_date:""});(0,n.useEffect)(()=>{e&&M()},[e]);let M=async()=>{try{P(!0);let{data:s}=await N.OQ.from("interns").select("id").eq("user_id",e?.id).single();if(s){let{data:e,error:t}=await N.MJ.getByIntern(s.id);t?r({title:"Erreur",description:"Impossible de charger les demandes",variant:"destructive"}):w(e||[])}}catch(e){console.error("Erreur:",e),r({title:"Erreur",description:"Une erreur est survenue",variant:"destructive"})}finally{P(!1)}},T=async s=>{s.preventDefault();try{let{data:s}=await N.OQ.from("interns").select("id").eq("user_id",e?.id).single();if(!s){r({title:"Erreur",description:"Profil stagiaire non trouv\xe9",variant:"destructive"});return}let t={...k,intern_id:s.id,status:"pending"},{data:n,error:a}=await N.MJ.create(t);a?r({title:"Erreur",description:"Impossible de cr\xe9er la demande",variant:"destructive"}):(r({title:"Succ\xe8s",description:"Demande cr\xe9\xe9e avec succ\xe8s"}),D(!1),E({type:"",title:"",description:"",start_date:"",end_date:""}),M())}catch(e){console.error("Erreur:",e),r({title:"Erreur",description:"Une erreur est survenue",variant:"destructive"})}},Z=e=>{switch(e){case"pending":return(0,t.jsxs)(o.C,{variant:"secondary",children:[t.jsx(v.Z,{className:"w-3 h-3 mr-1"}),"En attente"]});case"approved":return(0,t.jsxs)(o.C,{variant:"default",children:[t.jsx(g.Z,{className:"w-3 h-3 mr-1"}),"Approuv\xe9e"]});case"rejected":return(0,t.jsxs)(o.C,{variant:"destructive",children:[t.jsx(f.Z,{className:"w-3 h-3 mr-1"}),"Rejet\xe9e"]});case"completed":return(0,t.jsxs)(o.C,{variant:"outline",children:[t.jsx(g.Z,{className:"w-3 h-3 mr-1"}),"Termin\xe9e"]});default:return t.jsx(o.C,{variant:"secondary",children:e})}},A=e=>{switch(e){case"leave":return"Cong\xe9";case"extension":return"Prolongation";case"evaluation":return"\xc9valuation";case"document":return"Document";case"support":return"Support";default:return e}};return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[t.jsx(a.MainNav,{}),(0,t.jsxs)("div",{className:"flex-1 flex",children:[t.jsx("aside",{className:"w-64 border-r bg-muted/10",children:t.jsx(i.T,{role:"intern"})}),t.jsx("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Mes Demandes"}),t.jsx("p",{className:"text-muted-foreground",children:"G\xe9rez vos demandes de cong\xe9s, prolongations et autres"})]}),(0,t.jsxs)(x.Vq,{open:S,onOpenChange:D,children:[t.jsx(x.hg,{asChild:!0,children:(0,t.jsxs)(l.z,{children:[t.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Nouvelle demande"]})}),(0,t.jsxs)(x.cZ,{className:"max-w-md",children:[(0,t.jsxs)(x.fK,{children:[t.jsx(x.$N,{children:"Cr\xe9er une nouvelle demande"}),t.jsx(x.Be,{children:"Remplissez les informations de votre demande"})]}),(0,t.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"type",children:"Type de demande"}),(0,t.jsxs)(j.Ph,{value:k.type,onValueChange:e=>E({...k,type:e}),children:[t.jsx(j.i4,{children:t.jsx(j.ki,{placeholder:"S\xe9lectionner un type"})}),(0,t.jsxs)(j.Bw,{children:[t.jsx(j.Ql,{value:"leave",children:"Cong\xe9"}),t.jsx(j.Ql,{value:"extension",children:"Prolongation"}),t.jsx(j.Ql,{value:"evaluation",children:"\xc9valuation"}),t.jsx(j.Ql,{value:"document",children:"Document"}),t.jsx(j.Ql,{value:"support",children:"Support"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"title",children:"Titre"}),t.jsx(p.I,{id:"title",value:k.title,onChange:e=>E({...k,title:e.target.value}),placeholder:"Titre de la demande",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"description",children:"Description"}),t.jsx(m.g,{id:"description",value:k.description,onChange:e=>E({...k,description:e.target.value}),placeholder:"D\xe9crivez votre demande",required:!0})]}),("leave"===k.type||"extension"===k.type)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"start_date",children:"Date de d\xe9but"}),t.jsx(p.I,{id:"start_date",type:"date",value:k.start_date,onChange:e=>E({...k,start_date:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"end_date",children:"Date de fin"}),t.jsx(p.I,{id:"end_date",type:"date",value:k.end_date,onChange:e=>E({...k,end_date:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[t.jsx(l.z,{type:"button",variant:"outline",onClick:()=>D(!1),className:"flex-1",children:"Annuler"}),t.jsx(l.z,{type:"submit",className:"flex-1",children:"Cr\xe9er"})]})]})]})]})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsxs)(c.Ol,{children:[(0,t.jsxs)(c.ll,{className:"flex items-center gap-2",children:[t.jsx(b.Z,{className:"w-5 h-5"}),"Liste des demandes"]}),t.jsx(c.SZ,{children:"Historique de toutes vos demandes"})]}),t.jsx(c.aY,{children:C?t.jsx("div",{className:"text-center py-6",children:"Chargement..."}):0===s.length?t.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"Aucune demande trouv\xe9e"}):(0,t.jsxs)(u.iA,{children:[t.jsx(u.xD,{children:(0,t.jsxs)(u.SC,{children:[t.jsx(u.ss,{children:"Type"}),t.jsx(u.ss,{children:"Titre"}),t.jsx(u.ss,{children:"Description"}),t.jsx(u.ss,{children:"Statut"}),t.jsx(u.ss,{children:"Date de cr\xe9ation"})]})}),t.jsx(u.RM,{children:s.map(e=>(0,t.jsxs)(u.SC,{children:[t.jsx(u.pj,{children:A(e.type)}),t.jsx(u.pj,{className:"font-medium",children:e.title}),t.jsx(u.pj,{className:"max-w-xs truncate",children:e.description}),t.jsx(u.pj,{children:Z(e.status)}),t.jsx(u.pj,{children:new Date(e.created_at).toLocaleDateString("fr-FR")})]},e.id))})]})})]})]})})]}),t.jsx(d.n,{})]})}},76466:(e,r,s)=>{"use strict";s.d(r,{g:()=>i});var t=s(60080),n=s(9885),a=s(23161);let i=n.forwardRef(({className:e,...r},s)=>t.jsx("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));i.displayName="Textarea"},58435:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});var t=s(17536);let n=(0,t.createProxy)(String.raw`/home/runner/workspace/app/dashboard/intern/requests/page.tsx`),{__esModule:a,$$typeof:i}=n,d=n.default,l=d}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[449,2322,6912,6229,251,2662,7471,314,5141,2589,8384,9176,9336,5924,3903,7052,589,8639,4796,446],()=>s(31858));module.exports=t})();
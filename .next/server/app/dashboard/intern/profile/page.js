(()=>{var e={};e.id=7441,e.ids=[7441],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},61899:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>u,routeModule:()=>m,tree:()=>c});var t=s(73137),a=s(54647),i=s(4183),l=s.n(i),n=s(71775),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(r,o);let d=t.AppPageRouteModule,c=["",{children:["dashboard",{children:["intern",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3297)),"/home/runner/workspace/app/dashboard/intern/profile/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,74436)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8912)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],u=["/home/runner/workspace/app/dashboard/intern/profile/page.tsx"],p="/dashboard/intern/profile/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new d({definition:{kind:a.x.APP_PAGE,page:"/dashboard/intern/profile/page",pathname:"/dashboard/intern/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},44329:(e,r,s)=>{Promise.resolve().then(s.bind(s,8185))},8185:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h});var t=s(60080),a=s(9885),i=s(89176),l=s(6450),n=s(65924),o=s(68384),d=s(49424),c=s(33478),u=s(32293),p=s(87502),x=s(69336),m=s(7731),f=s(77988);function h(){let{toast:e}=(0,p.pm)(),{user:r,getCurrentUser:s}=(0,x.t)(),[h,g]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),[j,y]=(0,a.useState)({full_name:"",email:"",phone:"",address:""});(0,a.useEffect)(()=>{r&&y({full_name:r.full_name||"",email:r.email||"",phone:r.phone||"",address:r.address||""})},[r]);let N=async t=>{if(t.preventDefault(),r){v(!0);try{let{error:t}=await f.OQ.from("users").update({full_name:j.full_name,phone:j.phone,address:j.address,updated_at:new Date().toISOString()}).eq("id",r.id);if(t)throw t;await s(),e({title:"Profil mis \xe0 jour",description:"Vos informations ont \xe9t\xe9 mises \xe0 jour avec succ\xe8s."})}catch(r){e({title:"Erreur",description:"Impossible de mettre \xe0 jour le profil",variant:"destructive"})}finally{v(!1)}}},_=(e,r)=>{y(s=>({...s,[e]:r}))};return r?(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[t.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:t.jsx("div",{className:"container flex h-16 items-center",children:t.jsx(i.MainNav,{role:"intern"})})}),(0,t.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[t.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:t.jsx(l.T,{role:"intern"})}),t.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Mon Profil"}),t.jsx("p",{className:"text-muted-foreground",children:"G\xe9rez vos informations personnelles et vos pr\xe9f\xe9rences."})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)(u.qE,{className:"h-24 w-24",children:[t.jsx(u.F$,{src:r.avatar_url,alt:r.full_name}),t.jsx(u.Q5,{children:(0,m.Q)(r.full_name)})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium",children:"Photo de profil"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Cette photo sera visible par votre tuteur et l'\xe9quipe RH."}),t.jsx(o.z,{variant:"outline",size:"sm",children:"Changer la photo"})]})]}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(c._,{htmlFor:"name",children:"Nom complet"}),t.jsx(d.I,{id:"name",value:j.full_name,onChange:e=>_("full_name",e.target.value),disabled:b})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(c._,{htmlFor:"email",children:"Email"}),t.jsx(d.I,{id:"email",type:"email",value:j.email,disabled:!0,className:"bg-muted"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"L'email ne peut pas \xeatre modifi\xe9"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(c._,{htmlFor:"phone",children:"T\xe9l\xe9phone"}),t.jsx(d.I,{id:"phone",value:j.phone,onChange:e=>_("phone",e.target.value),disabled:b,placeholder:"Ex: 0123456789"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(c._,{htmlFor:"role",children:"R\xf4le"}),t.jsx(d.I,{id:"role",value:"Stagiaire",disabled:!0,className:"bg-muted"})]}),(0,t.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[t.jsx(c._,{htmlFor:"address",children:"Adresse"}),t.jsx(d.I,{id:"address",value:j.address,onChange:e=>_("address",e.target.value),disabled:b,placeholder:"Votre adresse compl\xe8te"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx(o.z,{type:"submit",disabled:b,children:b?"Mise \xe0 jour...":"Mettre \xe0 jour le profil"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Derni\xe8re mise \xe0 jour : ",new Date(r.updated_at).toLocaleDateString("fr-FR")]})]})]})]})]})})]}),t.jsx(n.n,{})]}):t.jsx("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement du profil..."})]})})}},49424:(e,r,s)=>{"use strict";s.d(r,{I:()=>l});var t=s(60080),a=s(9885),i=s(23161);let l=a.forwardRef(({className:e,type:r,...s},a)=>t.jsx("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));l.displayName="Input"},33478:(e,r,s)=>{"use strict";s.d(r,{_:()=>d});var t=s(60080),a=s(9885),i=s(43618),l=s(97389),n=s(23161);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...r},s)=>t.jsx(i.f,{ref:s,className:(0,n.cn)(o(),e),...r}));d.displayName=i.f.displayName},7731:(e,r,s)=>{"use strict";function t(e){if(!e)return"??";let r=e.split(" ");return 1===r.length?r[0].substring(0,2).toUpperCase():(r[0][0]+r[r.length-1][0]).toUpperCase()}s.d(r,{Q:()=>t})},3297:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var t=s(17536);let a=(0,t.createProxy)(String.raw`/home/runner/workspace/app/dashboard/intern/profile/page.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,o=n},43618:(e,r,s)=>{"use strict";s.d(r,{f:()=>n});var t=s(9885),a=s(43979),i=s(60080),l=t.forwardRef((e,r)=>(0,i.jsx)(a.WV.label,{...e,ref:r,onMouseDown:r=>{let s=r.target;s.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));l.displayName="Label";var n=l}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[449,2322,6912,6229,65,2662,2129,2974,8384,9176,9336,5924,3903,2293],()=>s(61899));module.exports=t})();
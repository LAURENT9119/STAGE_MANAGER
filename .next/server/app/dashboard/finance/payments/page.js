(()=>{var e={};e.id=533,e.ids=[533],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29628:(e,n,r)=>{"use strict";r.r(n),r.d(n,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>l,routeModule:()=>f,tree:()=>c}),r(80849),r(13321),r(11506),r(35866);var t=r(23191),o=r(88716),a=r(37922),s=r.n(a),i=r(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(n,d);let c=["",{children:["dashboard",{children:["finance",{children:["payments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,80849)),"/home/runner/workspace/app/dashboard/finance/payments/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13321)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],l=["/home/runner/workspace/app/dashboard/finance/payments/page.tsx"],u="/dashboard/finance/payments/page",m={require:r,loadChunk:()=>Promise.resolve()},f=new t.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/dashboard/finance/payments/page",pathname:"/dashboard/finance/payments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},18410:(e,n,r)=>{Promise.resolve().then(r.bind(r,84522))},53371:(e,n,r)=>{Promise.resolve().then(r.bind(r,58767))},30229:(e,n,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},97104:()=>{},84522:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>s});var t=r(10326),o=r(17577);(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/input'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}();var a=r(88307);function s(){let{user:e}=Object(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e}())(),[n,r]=(0,o.useState)([]),[s,i]=(0,o.useState)(!0),[d,c]=(0,o.useState)(null),[l,u]=(0,o.useState)(""),[m,f]=(0,o.useState)("all"),h=async(e,t)=>{try{let{error:o}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("payments").update({status:t,payment_date:"paid"===t?new Date().toISOString():null}).eq("id",e);if(o)throw o;r(n.map(n=>n.id===e?{...n,status:t,payment_date:"paid"===t?new Date().toISOString():n.payment_date}:n))}catch(e){c(e instanceof Error?e.message:"Erreur lors de la mise \xe0 jour")}},O=n.filter(e=>{let n=e.intern?.user?.full_name||"",r=e.intern?.user?.email||"",t=n.toLowerCase().includes(l.toLowerCase())||r.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase()),o="all"===m||e.status===m;return t&&o}),p=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=O.reduce((e,n)=>e+n.amount,0);return e&&("finance"===e.role||"admin"===e.role)?(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{}),(0,t.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[240px_minmax(0,1fr)] lg:gap-10",children:[t.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{})}),t.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Gestion des paiements"}),t.jsx("p",{className:"text-muted-foreground",children:"G\xe9rez les paiements et indemnit\xe9s des stagiaires"})]}),d&&t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{children:d})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-sm font-medium",children:"Total des paiements"})}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[x.toFixed(2)," €"]})})]}),(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-sm font-medium",children:"En attente"})}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:t.jsx("div",{className:"text-2xl font-bold",children:O.filter(e=>"pending"===e.status).length})})]}),(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-sm font-medium",children:"Approuv\xe9s"})}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:t.jsx("div",{className:"text-2xl font-bold",children:O.filter(e=>"approved"===e.status).length})})]}),(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-sm font-medium",children:"Pay\xe9s"})}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:t.jsx("div",{className:"text-2xl font-bold",children:O.filter(e=>"paid"===e.status).length})})]})]}),(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Filtres et recherche"})}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(a.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/input'");throw e.code="MODULE_NOT_FOUND",e}()),{placeholder:"Rechercher par stagiaire ou description...",value:l,onChange:e=>u(e.target.value),className:"pl-8"})]})}),(0,t.jsxs)("select",{value:m,onChange:e=>f(e.target.value),className:"px-3 py-2 border rounded-md",children:[t.jsx("option",{value:"all",children:"Tous les statuts"}),t.jsx("option",{value:"pending",children:"En attente"}),t.jsx("option",{value:"approved",children:"Approuv\xe9"}),t.jsx("option",{value:"paid",children:"Pay\xe9"}),t.jsx("option",{value:"rejected",children:"Rejet\xe9"})]})]})})]}),(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:["Paiements (",O.length,")"]}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Liste de tous les paiements enregistr\xe9s"})]}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:s?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===O.length?t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucun paiement trouv\xe9"}):t.jsx("div",{className:"space-y-4",children:O.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("h3",{className:"font-medium",children:e.intern?.user?.full_name||"Stagiaire inconnu"}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}()),{className:p(e.status),children:e.status})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Montant: ",e.amount.toFixed(2)," €"]}),(0,t.jsxs)("span",{children:["Cr\xe9\xe9 le ",new Date(e.created_at).toLocaleDateString("fr-FR")]}),e.payment_date&&(0,t.jsxs)("span",{children:["Pay\xe9 le ",new Date(e.payment_date).toLocaleDateString("fr-FR")]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:["pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"outline",size:"sm",onClick:()=>h(e.id,"approved"),children:"Approuver"}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",size:"sm",onClick:()=>h(e.id,"rejected"),children:"Rejeter"})]}),"approved"===e.status&&t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"default",size:"sm",onClick:()=>h(e.id,"paid"),children:"Marquer comme pay\xe9"})]})]},e.id))})})]})]})})]}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}()),{})]}):t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Acc\xe8s non autoris\xe9. Seuls les membres de l'\xe9quipe finance peuvent acc\xe9der \xe0 cette page."})})})}},58767:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>s});var t=r(10326),o=r(17577),a=r(35047);function s({children:e}){let{user:n,loading:r,initializeAuth:s}=Object(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e}())();(0,a.useRouter)();let[i,d]=(0,o.useState)(!1);return!i||r?t.jsx("div",{className:"flex min-h-screen items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):n?(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[t.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"container flex h-16 items-center",children:[t.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{}),t.jsx("div",{className:"ml-auto flex items-center space-x-4",children:(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[n.full_name," (",n.role.toUpperCase(),")"]})})]})}),(0,t.jsxs)("div",{className:"flex flex-1",children:[t.jsx("aside",{className:"w-64 border-r bg-muted/10",children:t.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{userRole:n.role})}),t.jsx("main",{className:"flex-1",children:e})]}),t.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}()),{})]}):null}(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}()},62881:(e,n,r)=>{"use strict";r.d(n,{Z:()=>d});var t=r(17577);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=(...e)=>e.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:i="",children:d,iconNode:c,...l},u)=>(0,t.createElement)("svg",{ref:u,...s,width:n,height:n,stroke:e,strokeWidth:o?24*Number(r)/Number(n):r,className:a("lucide",i),...l},[...c.map(([e,n])=>(0,t.createElement)(e,n)),...Array.isArray(d)?d:[d]])),d=(e,n)=>{let r=(0,t.forwardRef)(({className:r,...s},d)=>(0,t.createElement)(i,{ref:d,iconNode:n,className:a(`lucide-${o(e)}`,r),...s}));return r.displayName=`${e}`,r}},88307:(e,n,r)=>{"use strict";r.d(n,{Z:()=>t});let t=(0,r(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},35047:(e,n,r)=>{"use strict";var t=r(77389);r.o(t,"useRouter")&&r.d(n,{useRouter:function(){return t.useRouter}})},80849:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/home/runner/workspace/app/dashboard/finance/payments/page.tsx#default`)},13321:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/home/runner/workspace/app/dashboard/layout.tsx#default`)},11506:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>i,metadata:()=>s});var t=r(19510),o=r(85384),a=r.n(o);r(67272),function(){var e=Error("Cannot find module '@/components/theme-provider'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/toaster'");throw e.code="MODULE_NOT_FOUND",e}();let s={title:"Stage+ | Gestion des Stagiaires",description:"Plateforme de gestion des stagiaires avec demandes en ligne"};function i({children:e}){return t.jsx("html",{lang:"fr",suppressHydrationWarning:!0,children:t.jsx("body",{className:a().className,children:(0,t.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/theme-provider'");throw e.code="MODULE_NOT_FOUND",e}()),{attribute:"class",defaultTheme:"light",children:[e,t.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/toaster'");throw e.code="MODULE_NOT_FOUND",e}()),{})]})})})}},67272:()=>{}};var n=require("../../../../webpack-runtime.js");n.C(e);var r=e=>n(n.s=e),t=n.X(0,[734],()=>r(29628));module.exports=t})();
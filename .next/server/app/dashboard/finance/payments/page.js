(()=>{var e={};e.id=1533,e.ids=[1533],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},69518:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var r=t(75593);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8559:(e,n,t)=>{"use strict";t.r(n),t.d(n,{GlobalError:()=>s.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>u,routeModule:()=>f,tree:()=>l});var r=t(73137),o=t(54647),a=t(4183),s=t.n(a),c=t(71775),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);t.d(n,i);let d=r.AppPageRouteModule,l=["",{children:["dashboard",{children:["finance",{children:["payments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,79388)),"/home/runner/workspace/app/dashboard/finance/payments/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,74436)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,79958)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],u=["/home/runner/workspace/app/dashboard/finance/payments/page.tsx"],m="/dashboard/finance/payments/page",p={require:t,loadChunk:()=>Promise.resolve()},f=new d({definition:{kind:o.x.APP_PAGE,page:"/dashboard/finance/payments/page",pathname:"/dashboard/finance/payments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},12012:(e,n,t)=>{Promise.resolve().then(t.bind(t,42505))},42505:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>s});var r=t(60080),o=t(9885);(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/input'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}();var a=t(69518);function s(){let{user:e}=Object(function(){var e=Error("Cannot find module '@/store/auth-store'");throw e.code="MODULE_NOT_FOUND",e}())(),[n,t]=(0,o.useState)([]),[s,c]=(0,o.useState)(!0),[i,d]=(0,o.useState)(null),[l,u]=(0,o.useState)(""),[m,p]=(0,o.useState)("all");(0,o.useEffect)(()=>{f()},[]);let f=async()=>{try{c(!0);let{data:e,error:n}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("payments").select(`
          *,
          intern:interns(
            user:users(full_name, email)
          )
        `).order("created_at",{ascending:!1});if(n)throw n;t(e||[])}catch(e){d(e instanceof Error?e.message:"Erreur lors du chargement")}finally{c(!1)}},O=async(e,r)=>{try{let{error:o}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("payments").update({status:r,payment_date:"paid"===r?new Date().toISOString():null}).eq("id",e);if(o)throw o;t(n.map(n=>n.id===e?{...n,status:r,payment_date:"paid"===r?new Date().toISOString():n.payment_date}:n))}catch(e){d(e instanceof Error?e.message:"Erreur lors de la mise \xe0 jour")}},x=n.filter(e=>{let n=e.intern?.user?.full_name||"",t=e.intern?.user?.email||"",r=n.toLowerCase().includes(l.toLowerCase())||t.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase()),o="all"===m||e.status===m;return r&&o}),h=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=x.reduce((e,n)=>e+n.amount,0);return e&&("finance"===e.role||"admin"===e.role)?(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[r.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/main-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{}),(0,r.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[240px_minmax(0,1fr)] lg:gap-10",children:[r.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/dashboard-nav'");throw e.code="MODULE_NOT_FOUND",e}()),{})}),r.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Gestion des paiements"}),r.jsx("p",{className:"text-muted-foreground",children:"G\xe9rez les paiements et indemnit\xe9s des stagiaires"})]}),i&&r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{children:i})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-sm font-medium",children:"Total des paiements"})}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[N.toFixed(2)," â‚¬"]})})]}),(0,r.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-sm font-medium",children:"En attente"})}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:r.jsx("div",{className:"text-2xl font-bold",children:x.filter(e=>"pending"===e.status).length})})]}),(0,r.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-sm font-medium",children:"Approuv\xe9s"})}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:r.jsx("div",{className:"text-2xl font-bold",children:x.filter(e=>"approved"===e.status).length})})]}),(0,r.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"text-sm font-medium",children:"Pay\xe9s"})}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:r.jsx("div",{className:"text-2xl font-bold",children:x.filter(e=>"paid"===e.status).length})})]})]}),(0,r.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Filtres et recherche"})}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(a.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/input'");throw e.code="MODULE_NOT_FOUND",e}()),{placeholder:"Rechercher par stagiaire ou description...",value:l,onChange:e=>u(e.target.value),className:"pl-8"})]})}),(0,r.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"px-3 py-2 border rounded-md",children:[r.jsx("option",{value:"all",children:"Tous les statuts"}),r.jsx("option",{value:"pending",children:"En attente"}),r.jsx("option",{value:"approved",children:"Approuv\xe9"}),r.jsx("option",{value:"paid",children:"Pay\xe9"}),r.jsx("option",{value:"rejected",children:"Rejet\xe9"})]})]})})]}),(0,r.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[(0,r.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[(0,r.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:["Paiements (",x.length,")"]}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Liste de tous les paiements enregistr\xe9s"})]}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{children:s?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===x.length?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucun paiement trouv\xe9"}):r.jsx("div",{className:"space-y-4",children:x.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("h3",{className:"font-medium",children:e.intern?.user?.full_name||"Stagiaire inconnu"}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/badge'");throw e.code="MODULE_NOT_FOUND",e}()),{className:h(e.status),children:e.status})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Montant: ",e.amount.toFixed(2)," â‚¬"]}),(0,r.jsxs)("span",{children:["Cr\xe9\xe9 le ",new Date(e.created_at).toLocaleDateString("fr-FR")]}),e.payment_date&&(0,r.jsxs)("span",{children:["Pay\xe9 le ",new Date(e.payment_date).toLocaleDateString("fr-FR")]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:["pending"===e.status&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"outline",size:"sm",onClick:()=>O(e.id,"approved"),children:"Approuver"}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",size:"sm",onClick:()=>O(e.id,"rejected"),children:"Rejeter"})]}),"approved"===e.status&&r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"default",size:"sm",onClick:()=>O(e.id,"paid"),children:"Marquer comme pay\xe9"})]})]},e.id))})})]})]})})]}),r.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/site-footer'");throw e.code="MODULE_NOT_FOUND",e}()),{})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{variant:"destructive",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/alert'");throw e.code="MODULE_NOT_FOUND",e}()),{children:"Acc\xe8s non autoris\xe9. Seuls les membres de l'\xe9quipe finance peuvent acc\xe9der \xe0 cette page."})})})}},79388:(e,n,t)=>{"use strict";t.r(n),t.d(n,{$$typeof:()=>s,__esModule:()=>a,default:()=>i});var r=t(17536);let o=(0,r.createProxy)(String.raw`/home/runner/workspace/app/dashboard/finance/payments/page.tsx`),{__esModule:a,$$typeof:s}=o,c=o.default,i=c},57114:(e,n,t)=>{e.exports=t(82778)}};var n=require("../../../../webpack-runtime.js");n.C(e);var t=e=>n(n.s=e),r=n.X(0,[7255,9913,3207,3903],()=>t(8559));module.exports=r})();
(()=>{var e={};e.id=6802,e.ids=[6802],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},42312:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>x,routeModule:()=>u,tree:()=>o});var r=t(73137),a=t(54647),l=t(4183),n=t.n(l),i=t(71775),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=r.AppPageRouteModule,o=["",{children:["dashboard",{children:["finance",{children:["reports",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,36941)),"/home/runner/workspace/app/dashboard/finance/reports/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,74436)),"/home/runner/workspace/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,8912)),"/home/runner/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],x=["/home/runner/workspace/app/dashboard/finance/reports/page.tsx"],m="/dashboard/finance/reports/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new c({definition:{kind:a.x.APP_PAGE,page:"/dashboard/finance/reports/page",pathname:"/dashboard/finance/reports",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},53541:(e,s,t)=>{Promise.resolve().then(t.bind(t,37185))},37185:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>U});var r=t(60080),a=t(9885),l=t(89176),n=t(6450),i=t(65924),d=t(68384),c=t(97052),o=t(10999),x=t(70589),m=t(63647),h=t(34707),u=t(24300),p=t(35522),j=t(14839),f=t(54206),g=t(83053),b=t(97106),v=t(34482),N=t(98741),y=t(16324),w=t(44723),k=t(8081),_=t(517),q=t(66908),P=t(12125);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Z=(0,P.Z)("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);var C=t(78260),M=t(50007),D=t(85574),O=t(35231),B=t(87502);let $=["#0088FE","#00C49F","#FFBB28","#FF8042"];function U(){let{interns:e,loading:s}=(0,O.L)(),{toast:t}=(0,B.pm)(),[P,U]=(0,a.useState)("month"),S=()=>{let s=[],t=new Date;for(let r=5;r>=0;r--){let a=new Date(t.getFullYear(),t.getMonth()-r,1),l=a.toLocaleDateString("fr-FR",{month:"short"}),n=e.filter(e=>{let s=new Date(e.start_date),t=new Date(e.end_date);return s<=a&&t>=a}).length,i=800*n;s.push({month:l,gratifications:i,budgetUsed:i,budgetTotal:5e4})}return s},T=()=>{let s=e.reduce((e,s)=>(e[s.department]=(e[s.department]||0)+800,e),{});return Object.entries(s).map(([e,s])=>({department:e,cost:s}))},Y=s=>{let r=[],a="";switch(s){case"monthly":r=S().map(e=>({Mois:e.month,"Gratifications (€)":e.gratifications,"Budget utilis\xe9 (€)":e.budgetUsed,"Budget total (€)":e.budgetTotal,"Taux d'utilisation (%)":Math.round(e.budgetUsed/e.budgetTotal*100)})),a="rapport_financier_mensuel";break;case"departments":r=T().map(s=>({Département:s.department,"Co\xfbt total (€)":s.cost,"Nombre stagiaires":e.filter(e=>e.department===s.department).length,"Co\xfbt moyen par stagiaire (€)":Math.round(s.cost/e.filter(e=>e.department===s.department).length)})),a="rapport_couts_departements"}let l=[Object.keys(r[0]||{}).join(","),...r.map(e=>Object.values(e).map(e=>`"${e}"`).join(","))].join("\n"),n=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=`${a}_${new Date().toISOString().split("T")[0]}.csv`,i.click(),t({title:"Export r\xe9ussi",description:`Le rapport ${s} a \xe9t\xe9 export\xe9 avec succ\xe8s`})},E=()=>{let e=S();return e.length>0?Math.round(e.reduce((e,s)=>e+s.gratifications,0)/e.length):0};return s?(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[r.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsx("div",{className:"container flex h-16 items-center",children:r.jsx(l.MainNav,{role:"finance"})})}),(0,r.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[r.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:r.jsx(n.T,{role:"finance"})}),r.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement des rapports financiers..."})]})})})]}),r.jsx(i.n,{})]}):(0,r.jsxs)("div",{className:"flex min-h-screen flex-col",children:[r.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsx("div",{className:"container flex h-16 items-center",children:r.jsx(l.MainNav,{role:"finance"})})}),(0,r.jsxs)("div",{className:"container flex-1 items-start md:grid md:grid-cols-[220px_1fr] md:gap-6 lg:grid-cols-[240px_1fr] lg:gap-10",children:[r.jsx("aside",{className:"fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block border-r",children:r.jsx(n.T,{role:"finance"})}),r.jsx("main",{className:"flex w-full flex-col overflow-hidden py-6",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Rapports Financiers"}),r.jsx("p",{className:"text-muted-foreground",children:"Analysez les co\xfbts et budgets li\xe9s aux stagiaires"})]}),r.jsx("div",{className:"flex gap-2",children:(0,r.jsxs)(x.Ph,{value:P,onValueChange:U,children:[(0,r.jsxs)(x.i4,{className:"w-[180px]",children:[r.jsx(_.Z,{className:"mr-2 h-4 w-4"}),r.jsx(x.ki,{})]}),(0,r.jsxs)(x.Bw,{children:[r.jsx(x.Ql,{value:"week",children:"Cette semaine"}),r.jsx(x.Ql,{value:"month",children:"Ce mois"}),r.jsx(x.Ql,{value:"quarter",children:"Ce trimestre"}),r.jsx(x.Ql,{value:"year",children:"Cette ann\xe9e"})]})]})})]}),(0,r.jsxs)(o.mQ,{defaultValue:"overview",className:"space-y-4",children:[(0,r.jsxs)(o.dr,{children:[(0,r.jsxs)(o.SP,{value:"overview",children:[r.jsx(q.Z,{className:"mr-2 h-4 w-4"}),"Vue d'ensemble"]}),(0,r.jsxs)(o.SP,{value:"budget",children:[r.jsx(Z,{className:"mr-2 h-4 w-4"}),"Budget"]}),(0,r.jsxs)(o.SP,{value:"departments",children:[r.jsx(C.Z,{className:"mr-2 h-4 w-4"}),"D\xe9partements"]})]}),(0,r.jsxs)(o.nU,{value:"overview",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(c.ll,{className:"text-sm font-medium",children:"Gratifications Totales"}),r.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(c.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[S().reduce((e,s)=>e+s.gratifications,0),"€"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"+15% par rapport au semestre dernier"})]})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(c.ll,{className:"text-sm font-medium",children:"Co\xfbt Mensuel Moyen"}),r.jsx(M.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(c.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[E(),"€"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Par mois en moyenne"})]})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(c.ll,{className:"text-sm font-medium",children:"Utilisation Budget"}),r.jsx(q.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(c.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[(()=>{let e=S(),s=e[e.length-1];return s?Math.round(s.budgetUsed/s.budgetTotal*100):0})(),"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Du budget mensuel utilis\xe9"})]})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(c.ll,{className:"text-sm font-medium",children:"Co\xfbt par Stagiaire"}),r.jsx(C.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(c.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"800€"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Gratification moyenne mensuelle"})]})]})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[r.jsx(c.ll,{children:"\xc9volution des co\xfbts"}),r.jsx(c.SZ,{children:"Gratifications vers\xe9es par mois"})]}),r.jsx(c.aY,{children:r.jsx(m.h,{width:"100%",height:300,children:(0,r.jsxs)(h.w,{data:S(),children:[r.jsx(u.q,{strokeDasharray:"3 3"}),r.jsx(p.K,{dataKey:"month"}),r.jsx(j.B,{}),r.jsx(f.u,{formatter:e=>[`${e}€`,"Montant"]}),r.jsx(g.D,{}),r.jsx(b.x,{type:"monotone",dataKey:"gratifications",stroke:"#8884d8",name:"Gratifications",strokeWidth:2})]})})})]})]}),(0,r.jsxs)(o.nU,{value:"budget",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Gestion du Budget"}),(0,r.jsxs)(d.z,{onClick:()=>Y("monthly"),children:[r.jsx(D.Z,{className:"mr-2 h-4 w-4"}),"Exporter Budget"]})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[r.jsx(c.ll,{children:"Utilisation du budget mensuel"}),r.jsx(c.SZ,{children:"Comparaison budget allou\xe9 vs budget utilis\xe9"})]}),r.jsx(c.aY,{children:r.jsx(m.h,{width:"100%",height:400,children:(0,r.jsxs)(v.v,{data:S(),children:[r.jsx(u.q,{strokeDasharray:"3 3"}),r.jsx(p.K,{dataKey:"month"}),r.jsx(j.B,{}),r.jsx(f.u,{formatter:e=>[`${e}€`,"Montant"]}),r.jsx(g.D,{}),r.jsx(N.$,{dataKey:"budgetTotal",fill:"#e0e7ff",name:"Budget total"}),r.jsx(N.$,{dataKey:"budgetUsed",fill:"#8884d8",name:"Budget utilis\xe9"})]})})})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{children:r.jsx(c.ll,{children:"Budget restant"})}),(0,r.jsxs)(c.aY,{children:[(0,r.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:[5e4-(S()[S().length-1]?.budgetUsed||0),"€"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Disponible ce mois"})]})]}),(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{children:r.jsx(c.ll,{children:"Projection fin d'ann\xe9e"})}),(0,r.jsxs)(c.aY,{children:[(0,r.jsxs)("div",{className:"text-3xl font-bold",children:[12*E(),"€"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Co\xfbt annuel estim\xe9"})]})]})]})]}),(0,r.jsxs)(o.nU,{value:"departments",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Co\xfbts par D\xe9partement"}),(0,r.jsxs)(d.z,{onClick:()=>Y("departments"),children:[r.jsx(D.Z,{className:"mr-2 h-4 w-4"}),"Exporter D\xe9partements"]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[r.jsx(c.ll,{children:"R\xe9partition des co\xfbts"}),r.jsx(c.SZ,{children:"Co\xfbts par d\xe9partement"})]}),r.jsx(c.aY,{children:r.jsx(m.h,{width:"100%",height:300,children:(0,r.jsxs)(y.u,{children:[r.jsx(w.b,{data:T(),cx:"50%",cy:"50%",labelLine:!1,label:({department:e,cost:s})=>`${e}: ${s}€`,outerRadius:100,fill:"#8884d8",dataKey:"cost",children:T().map((e,s)=>r.jsx(k.b,{fill:$[s%$.length]},`cell-${s}`))}),r.jsx(f.u,{formatter:e=>[`${e}€`,"Co\xfbt"]})]})})})]}),(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{children:r.jsx(c.ll,{children:"D\xe9tail par d\xe9partement"})}),r.jsx(c.aY,{children:r.jsx("div",{className:"space-y-4",children:T().map(s=>{let t=e.filter(e=>e.department===s.department).length,a=Math.round(s.cost/t);return(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium",children:s.department}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t," stagiaire",t>1?"s":""]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-bold",children:[s.cost,"€"]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a,"€/stagiaire"]})]})]},s.department)})})})]})]})]})]})]})})]}),r.jsx(i.n,{})]})}},36941:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>d});var r=t(17536);let a=(0,r.createProxy)(String.raw`/home/runner/workspace/app/dashboard/finance/reports/page.tsx`),{__esModule:l,$$typeof:n}=a,i=a.default,d=i}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[449,2322,6912,6229,65,2662,7471,1150,5759,2447,9727,2974,8384,9176,9336,5924,3903,7052,589,5231,999],()=>t(42312));module.exports=r})();